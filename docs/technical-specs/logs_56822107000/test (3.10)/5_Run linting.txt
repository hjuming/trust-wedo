2026-02-09T09:19:42.5409919Z ##[group]Run ruff check src/ tests/
2026-02-09T09:19:42.5410266Z [36;1mruff check src/ tests/[0m
2026-02-09T09:19:42.5410506Z [36;1mblack --check src/ tests/[0m
2026-02-09T09:19:42.5444972Z shell: /usr/bin/bash -e {0}
2026-02-09T09:19:42.5445212Z env:
2026-02-09T09:19:42.5445459Z   pythonLocation: /opt/hostedtoolcache/Python/3.10.19/x64
2026-02-09T09:19:42.5445891Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.10.19/x64/lib/pkgconfig
2026-02-09T09:19:42.5446301Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2026-02-09T09:19:42.5446689Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2026-02-09T09:19:42.5447051Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2026-02-09T09:19:42.5447414Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.10.19/x64/lib
2026-02-09T09:19:42.5447726Z ##[endgroup]
2026-02-09T09:19:42.5621612Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5622341Z   --> src/trust_wedo/cli.py:3:1
2026-02-09T09:19:42.5622770Z    |
2026-02-09T09:19:42.5623230Z  1 |   """CLI entry point for Trust WEDO."""
2026-02-09T09:19:42.5623674Z  2 |
2026-02-09T09:19:42.5623952Z  3 | / import click
2026-02-09T09:19:42.5624276Z  4 | | import json
2026-02-09T09:19:42.5624599Z  5 | | import asyncio
2026-02-09T09:19:42.5624969Z  6 | | from pathlib import Path
2026-02-09T09:19:42.5625391Z  7 | | from trust_wedo import __version__
2026-02-09T09:19:42.5625958Z  8 | | from trust_wedo.parsers.site_parser import SiteParser
2026-02-09T09:19:42.5626619Z  9 | | from trust_wedo.core.entity_scorer import EntityScorer
2026-02-09T09:19:42.5627512Z 10 | | from trust_wedo.core.afb_builder import AFBBuilder
2026-02-09T09:19:42.5628211Z 11 | | from trust_wedo.core.citation_evaluator import CitationEvaluator
2026-02-09T09:19:42.5629147Z 12 | | from trust_wedo.core.graph_builder import GraphBuilder
2026-02-09T09:19:42.5629850Z 13 | | from trust_wedo.core.report_generator import ReportGenerator
2026-02-09T09:19:42.5630565Z 14 | | from trust_wedo.core.capture_manager import CaptureManager
2026-02-09T09:19:42.5631246Z 15 | | from trust_wedo.core.diff_analyzer import DiffAnalyzer
2026-02-09T09:19:42.5631973Z 16 | | from trust_wedo.validators.schema_validator import SchemaValidator
2026-02-09T09:19:42.5632675Z    | |__________________________________________________________________^
2026-02-09T09:19:42.5633189Z    |
2026-02-09T09:19:42.5633480Z help: Organize imports
2026-02-09T09:19:42.5633708Z 
2026-02-09T09:19:42.5633869Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5634309Z   --> src/trust_wedo/cli.py:26:1
2026-02-09T09:19:42.5634711Z    |
2026-02-09T09:19:42.5635189Z 24 | def main(ctx: click.Context, verbose: bool, quiet: bool) -> None:
2026-02-09T09:19:42.5635954Z 25 |     """Trust WEDO - Answer Trust Infrastructure for Generative Systems.
2026-02-09T09:19:42.5636550Z 26 |     
2026-02-09T09:19:42.5636820Z    | ^^^^
2026-02-09T09:19:42.5637519Z 27 |     把網站內容轉換為「AI 可評估、可拒絕、可引用」的答案物件。
2026-02-09T09:19:42.5637931Z 28 |     """
2026-02-09T09:19:42.5638220Z    |
2026-02-09T09:19:42.5638714Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5639056Z 
2026-02-09T09:19:42.5639216Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5639664Z   --> src/trust_wedo/cli.py:41:1
2026-02-09T09:19:42.5640039Z    |
2026-02-09T09:19:42.5640540Z 39 | def scan(ctx: click.Context, url: str, output: str, max_pages: int) -> None:
2026-02-09T09:19:42.5641289Z 40 |     """掃描網站內容並抽取基礎結構。
2026-02-09T09:19:42.5641644Z 41 |     
2026-02-09T09:19:42.5641918Z    | ^^^^
2026-02-09T09:19:42.5642292Z 42 |     輸出：output/site.json
2026-02-09T09:19:42.5642667Z 43 |     """
2026-02-09T09:19:42.5642954Z    |
2026-02-09T09:19:42.5643268Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5643592Z 
2026-02-09T09:19:42.5643750Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5644198Z   --> src/trust_wedo/cli.py:45:1
2026-02-09T09:19:42.5644577Z    |
2026-02-09T09:19:42.5644843Z 43 |     """
2026-02-09T09:19:42.5645246Z 44 |     click.echo(f"🔍 掃描網站: {url}")
2026-02-09T09:19:42.5645930Z 45 |     
2026-02-09T09:19:42.5646214Z    | ^^^^
2026-02-09T09:19:42.5646592Z 46 |     parser = SiteParser(url, max_pages=max_pages)
2026-02-09T09:19:42.5647118Z 47 |     result = asyncio.run(parser.scan())
2026-02-09T09:19:42.5647627Z    |
2026-02-09T09:19:42.5647999Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5648307Z 
2026-02-09T09:19:42.5648465Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5649106Z   --> src/trust_wedo/cli.py:48:1
2026-02-09T09:19:42.5649493Z    |
2026-02-09T09:19:42.5649872Z 46 |     parser = SiteParser(url, max_pages=max_pages)
2026-02-09T09:19:42.5650411Z 47 |     result = asyncio.run(parser.scan())
2026-02-09T09:19:42.5650837Z 48 |     
2026-02-09T09:19:42.5651111Z    | ^^^^
2026-02-09T09:19:42.5651414Z 49 |     output_path = Path(output)
2026-02-09T09:19:42.5651912Z 50 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5652393Z    |
2026-02-09T09:19:42.5652723Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5653043Z 
2026-02-09T09:19:42.5653201Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5653653Z   --> src/trust_wedo/cli.py:52:1
2026-02-09T09:19:42.5654049Z    |
2026-02-09T09:19:42.5654409Z 50 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5654964Z 51 |     site_json_path = output_path / "site.json"
2026-02-09T09:19:42.5655417Z 52 |     
2026-02-09T09:19:42.5655693Z    | ^^^^
2026-02-09T09:19:42.5656017Z 53 |     with open(site_json_path, "w") as f:
2026-02-09T09:19:42.5656569Z 54 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5657337Z    |
2026-02-09T09:19:42.5657671Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5657993Z 
2026-02-09T09:19:42.5658160Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5658773Z   --> src/trust_wedo/cli.py:55:1
2026-02-09T09:19:42.5659170Z    |
2026-02-09T09:19:42.5659490Z 53 |     with open(site_json_path, "w") as f:
2026-02-09T09:19:42.5660043Z 54 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5660556Z 55 |     
2026-02-09T09:19:42.5660835Z    | ^^^^
2026-02-09T09:19:42.5661296Z 56 |     click.echo(f"📁 已儲存至: {site_json_path}")
2026-02-09T09:19:42.5661747Z    |
2026-02-09T09:19:42.5662062Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5662390Z 
2026-02-09T09:19:42.5662554Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5663008Z   --> src/trust_wedo/cli.py:57:1
2026-02-09T09:19:42.5663385Z    |
2026-02-09T09:19:42.5663803Z 56 |     click.echo(f"📁 已儲存至: {site_json_path}")
2026-02-09T09:19:42.5664255Z 57 |     
2026-02-09T09:19:42.5664533Z    | ^^^^
2026-02-09T09:19:42.5664848Z 58 |     validator = SchemaValidator()
2026-02-09T09:19:42.5665443Z 59 |     is_valid, error = validator.validate_file(site_json_path, "site")
2026-02-09T09:19:42.5666023Z    |
2026-02-09T09:19:42.5666342Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5666647Z 
2026-02-09T09:19:42.5666811Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5667253Z   --> src/trust_wedo/cli.py:80:1
2026-02-09T09:19:42.5667630Z    |
2026-02-09T09:19:42.5668127Z 78 | def entity_score(ctx: click.Context, site_json: str, output: str) -> None:
2026-02-09T09:19:42.5669011Z 79 |     """計算實體信任評分。
2026-02-09T09:19:42.5669338Z 80 |     
2026-02-09T09:19:42.5669620Z    | ^^^^
2026-02-09T09:19:42.5670007Z 81 |     輸出：output/entity_profile.json
2026-02-09T09:19:42.5670425Z 82 |     """
2026-02-09T09:19:42.5670716Z    |
2026-02-09T09:19:42.5671053Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5671371Z 
2026-02-09T09:19:42.5671526Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5672217Z   --> src/trust_wedo/cli.py:84:1
2026-02-09T09:19:42.5672603Z    |
2026-02-09T09:19:42.5672863Z 82 |     """
2026-02-09T09:19:42.5673320Z 83 |     click.echo(f"📊 計算實體信任評分: {site_json}")
2026-02-09T09:19:42.5673748Z 84 |     
2026-02-09T09:19:42.5674009Z    | ^^^^
2026-02-09T09:19:42.5674311Z 85 |     with open(site_json) as f:
2026-02-09T09:19:42.5674726Z 86 |         site_data = json.load(f)
2026-02-09T09:19:42.5675342Z    |
2026-02-09T09:19:42.5675652Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5675951Z 
2026-02-09T09:19:42.5676103Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5676538Z   --> src/trust_wedo/cli.py:87:1
2026-02-09T09:19:42.5676900Z    |
2026-02-09T09:19:42.5677192Z 85 |     with open(site_json) as f:
2026-02-09T09:19:42.5677596Z 86 |         site_data = json.load(f)
2026-02-09T09:19:42.5677982Z 87 |     
2026-02-09T09:19:42.5678255Z    | ^^^^
2026-02-09T09:19:42.5678748Z 88 |     scorer = EntityScorer(site_data)
2026-02-09T09:19:42.5679291Z 89 |     result = scorer.calculate_score(input_source=site_json)
2026-02-09T09:19:42.5679799Z    |
2026-02-09T09:19:42.5680111Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5680416Z 
2026-02-09T09:19:42.5680575Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5681011Z   --> src/trust_wedo/cli.py:90:1
2026-02-09T09:19:42.5681367Z    |
2026-02-09T09:19:42.5681678Z 88 |     scorer = EntityScorer(site_data)
2026-02-09T09:19:42.5682227Z 89 |     result = scorer.calculate_score(input_source=site_json)
2026-02-09T09:19:42.5682759Z 90 |     
2026-02-09T09:19:42.5683027Z    | ^^^^
2026-02-09T09:19:42.5683333Z 91 |     output_path = Path(output)
2026-02-09T09:19:42.5683813Z 92 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5684254Z    |
2026-02-09T09:19:42.5684560Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5684860Z 
2026-02-09T09:19:42.5685269Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5685705Z   --> src/trust_wedo/cli.py:94:1
2026-02-09T09:19:42.5686073Z    |
2026-02-09T09:19:42.5686417Z 92 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5686994Z 93 |     entity_json_path = output_path / "entity_profile.json"
2026-02-09T09:19:42.5687519Z 94 |     
2026-02-09T09:19:42.5687779Z    | ^^^^
2026-02-09T09:19:42.5688101Z 95 |     with open(entity_json_path, "w") as f:
2026-02-09T09:19:42.5688714Z 96 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5689092Z    |
2026-02-09T09:19:42.5689301Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5689493Z 
2026-02-09T09:19:42.5689594Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5689861Z   --> src/trust_wedo/cli.py:97:1
2026-02-09T09:19:42.5690105Z    |
2026-02-09T09:19:42.5690316Z 95 |     with open(entity_json_path, "w") as f:
2026-02-09T09:19:42.5690636Z 96 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5691014Z 97 |     
2026-02-09T09:19:42.5691453Z    | ^^^^
2026-02-09T09:19:42.5691994Z 98 |     click.echo(f"👤 已產生實體檔案: {entity_json_path}")
2026-02-09T09:19:42.5692804Z 99 |     click.echo(f"📈 信任評分 (EC): {result['entity_confidence']} ({result['eligibility']})")
2026-02-09T09:19:42.5693439Z    |
2026-02-09T09:19:42.5693649Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5693833Z 
2026-02-09T09:19:42.5693936Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5694231Z    --> src/trust_wedo/cli.py:100:1
2026-02-09T09:19:42.5694469Z     |
2026-02-09T09:19:42.5694781Z  98 |     click.echo(f"👤 已產生實體檔案: {entity_json_path}")
2026-02-09T09:19:42.5695267Z  99 |     click.echo(f"📈 信任評分 (EC): {result['entity_confidence']} ({result['eligibility']})")
2026-02-09T09:19:42.5695652Z 100 |     
2026-02-09T09:19:42.5695833Z     | ^^^^
2026-02-09T09:19:42.5696041Z 101 |     validator = SchemaValidator()
2026-02-09T09:19:42.5696411Z 102 |     is_valid, error = validator.validate_file(entity_json_path, "entity")
2026-02-09T09:19:42.5696783Z     |
2026-02-09T09:19:42.5696989Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5697165Z 
2026-02-09T09:19:42.5697264Z E501 Line too long (106 > 100)
2026-02-09T09:19:42.5697519Z    --> src/trust_wedo/cli.py:119:97
2026-02-09T09:19:42.5697761Z     |
2026-02-09T09:19:42.5697960Z 117 | @afb.command(name="build")
2026-02-09T09:19:42.5698267Z 118 | @click.argument("page_html", type=click.Path(exists=True))
2026-02-09T09:19:42.5699319Z 119 | @click.option("--entity", "entity_file", required=True, type=click.Path(exists=True), help="實體信任檔案")
2026-02-09T09:19:42.5699853Z     |                                                                                                     ^^^^^^
2026-02-09T09:19:42.5700351Z 120 | @click.option("--output", "-o", default="output", help="輸出目錄")
2026-02-09T09:19:42.5700691Z 121 | @click.pass_context
2026-02-09T09:19:42.5700918Z     |
2026-02-09T09:19:42.5701020Z 
2026-02-09T09:19:42.5701121Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5701396Z    --> src/trust_wedo/cli.py:124:1
2026-02-09T09:19:42.5701648Z     |
2026-02-09T09:19:42.5701985Z 122 | def afb_build(ctx: click.Context, page_html: str, entity_file: str, output: str) -> None:
2026-02-09T09:19:42.5702591Z 123 |     """產生 Answer-First Block。
2026-02-09T09:19:42.5702847Z 124 |     
2026-02-09T09:19:42.5703040Z     | ^^^^
2026-02-09T09:19:42.5703258Z 125 |     輸出：output/afb.json
2026-02-09T09:19:42.5703490Z 126 |     """
2026-02-09T09:19:42.5703680Z     |
2026-02-09T09:19:42.5703891Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5704072Z 
2026-02-09T09:19:42.5704176Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5704442Z    --> src/trust_wedo/cli.py:128:1
2026-02-09T09:19:42.5704689Z     |
2026-02-09T09:19:42.5704854Z 126 |     """
2026-02-09T09:19:42.5705119Z 127 |     click.echo(f"🎯 產生 AFB: {page_html}")
2026-02-09T09:19:42.5705378Z 128 |     
2026-02-09T09:19:42.5705563Z     | ^^^^
2026-02-09T09:19:42.5705920Z 129 |     with open(entity_file) as f:
2026-02-09T09:19:42.5706194Z 130 |         entity_profile = json.load(f)
2026-02-09T09:19:42.5706447Z     |
2026-02-09T09:19:42.5706644Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5706819Z 
2026-02-09T09:19:42.5706923Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5707180Z    --> src/trust_wedo/cli.py:131:1
2026-02-09T09:19:42.5707424Z     |
2026-02-09T09:19:42.5707614Z 129 |     with open(entity_file) as f:
2026-02-09T09:19:42.5707899Z 130 |         entity_profile = json.load(f)
2026-02-09T09:19:42.5708156Z 131 |     
2026-02-09T09:19:42.5708340Z     | ^^^^
2026-02-09T09:19:42.5708738Z 132 |     with open(page_html, encoding="utf-8") as f:
2026-02-09T09:19:42.5709046Z 133 |         html_content = f.read()
2026-02-09T09:19:42.5709297Z     |
2026-02-09T09:19:42.5709497Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5709674Z 
2026-02-09T09:19:42.5709778Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5710044Z    --> src/trust_wedo/cli.py:134:1
2026-02-09T09:19:42.5710290Z     |
2026-02-09T09:19:42.5710503Z 132 |     with open(page_html, encoding="utf-8") as f:
2026-02-09T09:19:42.5710803Z 133 |         html_content = f.read()
2026-02-09T09:19:42.5711042Z 134 |     
2026-02-09T09:19:42.5711232Z     | ^^^^
2026-02-09T09:19:42.5711476Z 135 |     builder = AFBBuilder(html_content, entity_profile)
2026-02-09T09:19:42.5711826Z 136 |     result = builder.build(input_source=page_html)
2026-02-09T09:19:42.5712127Z     |
2026-02-09T09:19:42.5712334Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5712515Z 
2026-02-09T09:19:42.5712621Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5712890Z    --> src/trust_wedo/cli.py:137:1
2026-02-09T09:19:42.5713137Z     |
2026-02-09T09:19:42.5713379Z 135 |     builder = AFBBuilder(html_content, entity_profile)
2026-02-09T09:19:42.5713735Z 136 |     result = builder.build(input_source=page_html)
2026-02-09T09:19:42.5714031Z 137 |     
2026-02-09T09:19:42.5714219Z     | ^^^^
2026-02-09T09:19:42.5714429Z 138 |     output_path = Path(output)
2026-02-09T09:19:42.5714723Z 139 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5715017Z     |
2026-02-09T09:19:42.5715214Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5715397Z 
2026-02-09T09:19:42.5715778Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5716048Z    --> src/trust_wedo/cli.py:141:1
2026-02-09T09:19:42.5716298Z     |
2026-02-09T09:19:42.5716529Z 139 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5716996Z 140 |     afb_json_path = output_path / "afb.json"
2026-02-09T09:19:42.5717282Z 141 |     
2026-02-09T09:19:42.5717461Z     | ^^^^
2026-02-09T09:19:42.5717676Z 142 |     with open(afb_json_path, "w") as f:
2026-02-09T09:19:42.5718005Z 143 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5718312Z     |
2026-02-09T09:19:42.5718508Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5718889Z 
2026-02-09T09:19:42.5718998Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5719278Z    --> src/trust_wedo/cli.py:144:1
2026-02-09T09:19:42.5719513Z     |
2026-02-09T09:19:42.5719710Z 142 |     with open(afb_json_path, "w") as f:
2026-02-09T09:19:42.5720026Z 143 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5720332Z 144 |     
2026-02-09T09:19:42.5720509Z     | ^^^^
2026-02-09T09:19:42.5720812Z 145 |     click.echo(f"📄 已產生 AFB 檔案: {afb_json_path}")
2026-02-09T09:19:42.5721091Z     |
2026-02-09T09:19:42.5721287Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5721462Z 
2026-02-09T09:19:42.5721567Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5721830Z    --> src/trust_wedo/cli.py:146:1
2026-02-09T09:19:42.5722075Z     |
2026-02-09T09:19:42.5722338Z 145 |     click.echo(f"📄 已產生 AFB 檔案: {afb_json_path}")
2026-02-09T09:19:42.5722627Z 146 |     
2026-02-09T09:19:42.5722806Z     | ^^^^
2026-02-09T09:19:42.5723024Z 147 |     if result.get("eligibility") == "fail":
2026-02-09T09:19:42.5723769Z 148 |         click.echo(f"⚠️  實體信任分過低 (EC={result['confidence_signals']['entity_confidence']:.2f} < 0.60)，AFB 已標記為 fail")
2026-02-09T09:19:42.5724230Z     |
2026-02-09T09:19:42.5724435Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5724610Z 
2026-02-09T09:19:42.5724701Z E501 Line too long (127 > 100)
2026-02-09T09:19:42.5724957Z    --> src/trust_wedo/cli.py:148:95
2026-02-09T09:19:42.5725195Z     |
2026-02-09T09:19:42.5725408Z 147 |     if result.get("eligibility") == "fail":
2026-02-09T09:19:42.5725984Z 148 |         click.echo(f"⚠️  實體信任分過低 (EC={result['confidence_signals']['entity_confidence']:.2f} < 0.60)，AFB 已標記為 fail")
2026-02-09T09:19:42.5726535Z     |                                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5726885Z 149 |     
2026-02-09T09:19:42.5727080Z 150 |     validator = SchemaValidator()
2026-02-09T09:19:42.5727343Z     |
2026-02-09T09:19:42.5727459Z 
2026-02-09T09:19:42.5727562Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5727828Z    --> src/trust_wedo/cli.py:149:1
2026-02-09T09:19:42.5728069Z     |
2026-02-09T09:19:42.5728278Z 147 |     if result.get("eligibility") == "fail":
2026-02-09T09:19:42.5729070Z 148 |         click.echo(f"⚠️  實體信任分過低 (EC={result['confidence_signals']['entity_confidence']:.2f} < 0.60)，AFB 已標記為 fail")
2026-02-09T09:19:42.5729552Z 149 |     
2026-02-09T09:19:42.5729739Z     | ^^^^
2026-02-09T09:19:42.5729943Z 150 |     validator = SchemaValidator()
2026-02-09T09:19:42.5730300Z 151 |     is_valid, error = validator.validate_file(afb_json_path, "afb")
2026-02-09T09:19:42.5730638Z     |
2026-02-09T09:19:42.5730846Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5731022Z 
2026-02-09T09:19:42.5731119Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5731387Z    --> src/trust_wedo/cli.py:172:1
2026-02-09T09:19:42.5731628Z     |
2026-02-09T09:19:42.5731925Z 170 | def citation_eval(ctx: click.Context, afb_json: str, output: str) -> None:
2026-02-09T09:19:42.5732354Z 171 |     """評估引用可信度。
2026-02-09T09:19:42.5732562Z 172 |     
2026-02-09T09:19:42.5732744Z     | ^^^^
2026-02-09T09:19:42.5732979Z 173 |     輸出：output/citation_eval.json
2026-02-09T09:19:42.5733239Z 174 |     """
2026-02-09T09:19:42.5733418Z     |
2026-02-09T09:19:42.5733623Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5733800Z 
2026-02-09T09:19:42.5733899Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5734339Z    --> src/trust_wedo/cli.py:176:1
2026-02-09T09:19:42.5734573Z     |
2026-02-09T09:19:42.5734741Z 174 |     """
2026-02-09T09:19:42.5734998Z 175 |     click.echo(f"📝 評估引用: {afb_json}")
2026-02-09T09:19:42.5735256Z 176 |     
2026-02-09T09:19:42.5735438Z     | ^^^^
2026-02-09T09:19:42.5735631Z 177 |     with open(afb_json) as f:
2026-02-09T09:19:42.5735882Z 178 |         afb_data = json.load(f)
2026-02-09T09:19:42.5736115Z     |
2026-02-09T09:19:42.5736317Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5736499Z 
2026-02-09T09:19:42.5736597Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5736866Z    --> src/trust_wedo/cli.py:179:1
2026-02-09T09:19:42.5737105Z     |
2026-02-09T09:19:42.5737289Z 177 |     with open(afb_json) as f:
2026-02-09T09:19:42.5737547Z 178 |         afb_data = json.load(f)
2026-02-09T09:19:42.5737809Z 179 |     
2026-02-09T09:19:42.5737990Z     | ^^^^
2026-02-09T09:19:42.5738216Z 180 |     afb_id = afb_data.get("afb_id", "afb:unknown")
2026-02-09T09:19:42.5738517Z     |
2026-02-09T09:19:42.5739173Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5739372Z 
2026-02-09T09:19:42.5739479Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5739752Z    --> src/trust_wedo/cli.py:181:1
2026-02-09T09:19:42.5739990Z     |
2026-02-09T09:19:42.5740217Z 180 |     afb_id = afb_data.get("afb_id", "afb:unknown")
2026-02-09T09:19:42.5740598Z 181 |     
2026-02-09T09:19:42.5740876Z     | ^^^^
2026-02-09T09:19:42.5741247Z 182 |     # Try to find citations.json in the same directory
2026-02-09T09:19:42.5742046Z 183 |     citations_path = Path(afb_json).parent / "citations.json"
2026-02-09T09:19:42.5742561Z     |
2026-02-09T09:19:42.5742884Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5743191Z 
2026-02-09T09:19:42.5743340Z E501 Line too long (104 > 100)
2026-02-09T09:19:42.5743730Z    --> src/trust_wedo/cli.py:191:101
2026-02-09T09:19:42.5744103Z     |
2026-02-09T09:19:42.5744623Z 189 |         click.echo("ℹ️  找不到 citations.json，使用示範資料")
2026-02-09T09:19:42.5745095Z 190 |         citations = [
2026-02-09T09:19:42.5745763Z 191 |             {"citation_id": "cite:001", "url": "https://trusted-source.org/fact", "status": "verified"},
2026-02-09T09:19:42.5746644Z     |                                                                                                     ^^^^
2026-02-09T09:19:42.5747453Z 192 |             {"citation_id": "cite:002", "url": "https://twitter.com/someone/status/123", "status": "unverified"}
2026-02-09T09:19:42.5748164Z 193 |         ]
2026-02-09T09:19:42.5748451Z     |
2026-02-09T09:19:42.5748814Z 
2026-02-09T09:19:42.5748953Z E501 Line too long (112 > 100)
2026-02-09T09:19:42.5749339Z    --> src/trust_wedo/cli.py:192:101
2026-02-09T09:19:42.5749718Z     |
2026-02-09T09:19:42.5749988Z 190 |         citations = [
2026-02-09T09:19:42.5750609Z 191 |             {"citation_id": "cite:001", "url": "https://trusted-source.org/fact", "status": "verified"},
2026-02-09T09:19:42.5751771Z 192 |             {"citation_id": "cite:002", "url": "https://twitter.com/someone/status/123", "status": "unverified"}
2026-02-09T09:19:42.5752499Z     |                                                                                                     ^^^^^^^^^^^^
2026-02-09T09:19:42.5752834Z 193 |         ]
2026-02-09T09:19:42.5753018Z     |
2026-02-09T09:19:42.5753114Z 
2026-02-09T09:19:42.5753215Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5753495Z    --> src/trust_wedo/cli.py:194:1
2026-02-09T09:19:42.5753741Z     |
2026-02-09T09:19:42.5754125Z 192 |             {"citation_id": "cite:002", "url": "https://twitter.com/someone/status/123", "status": "unverified"}
2026-02-09T09:19:42.5754566Z 193 |         ]
2026-02-09T09:19:42.5754761Z 194 |     
2026-02-09T09:19:42.5754949Z     | ^^^^
2026-02-09T09:19:42.5755191Z 195 |     evaluator = CitationEvaluator(afb_id, citations)
2026-02-09T09:19:42.5755557Z 196 |     result = evaluator.evaluate(input_source=afb_json)
2026-02-09T09:19:42.5755867Z     |
2026-02-09T09:19:42.5756071Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5756445Z 
2026-02-09T09:19:42.5756547Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5756826Z    --> src/trust_wedo/cli.py:197:1
2026-02-09T09:19:42.5757069Z     |
2026-02-09T09:19:42.5757306Z 195 |     evaluator = CitationEvaluator(afb_id, citations)
2026-02-09T09:19:42.5757666Z 196 |     result = evaluator.evaluate(input_source=afb_json)
2026-02-09T09:19:42.5757958Z 197 |     
2026-02-09T09:19:42.5758151Z     | ^^^^
2026-02-09T09:19:42.5758353Z 198 |     output_path = Path(output)
2026-02-09T09:19:42.5758899Z 199 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5759192Z     |
2026-02-09T09:19:42.5759397Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5759577Z 
2026-02-09T09:19:42.5759675Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5759949Z    --> src/trust_wedo/cli.py:201:1
2026-02-09T09:19:42.5760197Z     |
2026-02-09T09:19:42.5760420Z 199 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5760812Z 200 |     citation_eval_json_path = output_path / "citation_eval.json"
2026-02-09T09:19:42.5761138Z 201 |     
2026-02-09T09:19:42.5761324Z     | ^^^^
2026-02-09T09:19:42.5761552Z 202 |     with open(citation_eval_json_path, "w") as f:
2026-02-09T09:19:42.5761904Z 203 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5762207Z     |
2026-02-09T09:19:42.5762409Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5762588Z 
2026-02-09T09:19:42.5762834Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5763109Z    --> src/trust_wedo/cli.py:204:1
2026-02-09T09:19:42.5763350Z     |
2026-02-09T09:19:42.5763582Z 202 |     with open(citation_eval_json_path, "w") as f:
2026-02-09T09:19:42.5763933Z 203 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5764226Z 204 |     
2026-02-09T09:19:42.5764409Z     | ^^^^
2026-02-09T09:19:42.5764771Z 205 |     click.echo(f"📋 已產生引用評估檔案: {citation_eval_json_path}")
2026-02-09T09:19:42.5765200Z 206 |     click.echo(f"⚖️  最終決策: {result['decision']}")
2026-02-09T09:19:42.5765480Z     |
2026-02-09T09:19:42.5765682Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5765860Z 
2026-02-09T09:19:42.5765966Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5766232Z    --> src/trust_wedo/cli.py:207:1
2026-02-09T09:19:42.5766479Z     |
2026-02-09T09:19:42.5766773Z 205 |     click.echo(f"📋 已產生引用評估檔案: {citation_eval_json_path}")
2026-02-09T09:19:42.5767173Z 206 |     click.echo(f"⚖️  最終決策: {result['decision']}")
2026-02-09T09:19:42.5767464Z 207 |     
2026-02-09T09:19:42.5767653Z     | ^^^^
2026-02-09T09:19:42.5767850Z 208 |     validator = SchemaValidator()
2026-02-09T09:19:42.5768241Z 209 |     is_valid, error = validator.validate_file(citation_eval_json_path, "citation")
2026-02-09T09:19:42.5768829Z     |
2026-02-09T09:19:42.5769038Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5769219Z 
2026-02-09T09:19:42.5769326Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5769596Z    --> src/trust_wedo/cli.py:230:1
2026-02-09T09:19:42.5769839Z     |
2026-02-09T09:19:42.5770133Z 228 | def graph_build(ctx: click.Context, bundle_dir: str, output: str) -> None:
2026-02-09T09:19:42.5770572Z 229 |     """建立實體關係圖並檢測風險。
2026-02-09T09:19:42.5770795Z 230 |     
2026-02-09T09:19:42.5770968Z     | ^^^^
2026-02-09T09:19:42.5771211Z 231 |     輸出：output/entity_graph.json
2026-02-09T09:19:42.5771453Z 232 |     """
2026-02-09T09:19:42.5771645Z     |
2026-02-09T09:19:42.5771851Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5772042Z 
2026-02-09T09:19:42.5772143Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5772402Z    --> src/trust_wedo/cli.py:234:1
2026-02-09T09:19:42.5772641Z     |
2026-02-09T09:19:42.5772812Z 232 |     """
2026-02-09T09:19:42.5773084Z 233 |     click.echo(f"🕸️  建立關係圖: {bundle_dir}")
2026-02-09T09:19:42.5773358Z 234 |     
2026-02-09T09:19:42.5773536Z     | ^^^^
2026-02-09T09:19:42.5773747Z 235 |     bundle_path = Path(bundle_dir)
2026-02-09T09:19:42.5774155Z 236 |     bundle_data = {}
2026-02-09T09:19:42.5774381Z     |
2026-02-09T09:19:42.5774575Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5774761Z 
2026-02-09T09:19:42.5774859Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5775121Z    --> src/trust_wedo/cli.py:237:1
2026-02-09T09:19:42.5775357Z     |
2026-02-09T09:19:42.5775556Z 235 |     bundle_path = Path(bundle_dir)
2026-02-09T09:19:42.5775814Z 236 |     bundle_data = {}
2026-02-09T09:19:42.5776030Z 237 |     
2026-02-09T09:19:42.5776202Z     | ^^^^
2026-02-09T09:19:42.5776405Z 238 |     files_to_load = {
2026-02-09T09:19:42.5776653Z 239 |         "entity": "entity_profile.json",
2026-02-09T09:19:42.5776958Z     |
2026-02-09T09:19:42.5777157Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5777342Z 
2026-02-09T09:19:42.5777447Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5777710Z    --> src/trust_wedo/cli.py:243:1
2026-02-09T09:19:42.5777962Z     |
2026-02-09T09:19:42.5778179Z 241 |         "citation": "citation_eval.json"
2026-02-09T09:19:42.5778448Z 242 |     }
2026-02-09T09:19:42.5778831Z 243 |     
2026-02-09T09:19:42.5779016Z     | ^^^^
2026-02-09T09:19:42.5779264Z 244 |     for key, filename in files_to_load.items():
2026-02-09T09:19:42.5779579Z 245 |         file_path = bundle_path / filename
2026-02-09T09:19:42.5779855Z     |
2026-02-09T09:19:42.5780057Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5780239Z 
2026-02-09T09:19:42.5780339Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5780746Z    --> src/trust_wedo/cli.py:251:1
2026-02-09T09:19:42.5780979Z     |
2026-02-09T09:19:42.5781161Z 249 |         else:
2026-02-09T09:19:42.5781453Z 250 |             click.echo(f"⚠️  找不到 {filename}")
2026-02-09T09:19:42.5781739Z 251 |     
2026-02-09T09:19:42.5781919Z     | ^^^^
2026-02-09T09:19:42.5782135Z 252 |     builder = GraphBuilder(bundle_data)
2026-02-09T09:19:42.5782457Z 253 |     result = builder.build(input_source=bundle_dir)
2026-02-09T09:19:42.5782782Z     |
2026-02-09T09:19:42.5782982Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5783164Z 
2026-02-09T09:19:42.5783267Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5783538Z    --> src/trust_wedo/cli.py:254:1
2026-02-09T09:19:42.5783776Z     |
2026-02-09T09:19:42.5783985Z 252 |     builder = GraphBuilder(bundle_data)
2026-02-09T09:19:42.5784298Z 253 |     result = builder.build(input_source=bundle_dir)
2026-02-09T09:19:42.5784597Z 254 |     
2026-02-09T09:19:42.5784784Z     | ^^^^
2026-02-09T09:19:42.5784992Z 255 |     output_path = Path(output)
2026-02-09T09:19:42.5785328Z 256 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5785619Z     |
2026-02-09T09:19:42.5785830Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5786006Z 
2026-02-09T09:19:42.5786108Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5786378Z    --> src/trust_wedo/cli.py:258:1
2026-02-09T09:19:42.5786615Z     |
2026-02-09T09:19:42.5786850Z 256 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5787195Z 257 |     graph_json_path = output_path / "entity_graph.json"
2026-02-09T09:19:42.5787500Z 258 |     
2026-02-09T09:19:42.5787680Z     | ^^^^
2026-02-09T09:19:42.5787894Z 259 |     with open(graph_json_path, "w") as f:
2026-02-09T09:19:42.5788228Z 260 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5788528Z     |
2026-02-09T09:19:42.5788909Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5789100Z 
2026-02-09T09:19:42.5789199Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5789472Z    --> src/trust_wedo/cli.py:261:1
2026-02-09T09:19:42.5789711Z     |
2026-02-09T09:19:42.5789932Z 259 |     with open(graph_json_path, "w") as f:
2026-02-09T09:19:42.5790259Z 260 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5790571Z 261 |     
2026-02-09T09:19:42.5790758Z     | ^^^^
2026-02-09T09:19:42.5791049Z 262 |     click.echo(f"🔗 已產生關係圖檔案: {graph_json_path}")
2026-02-09T09:19:42.5791501Z 263 |     metrics = result['metrics']
2026-02-09T09:19:42.5791747Z     |
2026-02-09T09:19:42.5791955Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5792131Z 
2026-02-09T09:19:42.5792225Z E501 Line too long (141 > 100)
2026-02-09T09:19:42.5792476Z    --> src/trust_wedo/cli.py:264:91
2026-02-09T09:19:42.5792712Z     |
2026-02-09T09:19:42.5792899Z 262 | …
2026-02-09T09:19:42.5793093Z 263 | …
2026-02-09T09:19:42.5793448Z 264 | …}, 孤立={metrics['is_isolated']}, 單一來源風險={metrics['single_source_risk']}")
2026-02-09T09:19:42.5793979Z     |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5794292Z 265 | …
2026-02-09T09:19:42.5794475Z 266 | …
2026-02-09T09:19:42.5794639Z     |
2026-02-09T09:19:42.5794745Z 
2026-02-09T09:19:42.5794851Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5795119Z    --> src/trust_wedo/cli.py:265:1
2026-02-09T09:19:42.5795362Z     |
2026-02-09T09:19:42.5795559Z 263 |     metrics = result['metrics']
2026-02-09T09:19:42.5796202Z 264 |     click.echo(f"📊 指標: 來源數={metrics['distinct_sources']}, 孤立={metrics['is_isolated']}, 單一來源風險={metrics['single_source_ri             …
2026-02-09T09:19:42.5797249Z 265 |     
2026-02-09T09:19:42.5797439Z     | ^^^^
2026-02-09T09:19:42.5797656Z 266 |     validator = SchemaValidator()
2026-02-09T09:19:42.5798023Z 267 |     is_valid, error = validator.validate_file(graph_json_path, "graph")
2026-02-09T09:19:42.5798389Z     |
2026-02-09T09:19:42.5798801Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5799019Z 
2026-02-09T09:19:42.5799125Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5799392Z    --> src/trust_wedo/cli.py:283:1
2026-02-09T09:19:42.5799627Z     |
2026-02-09T09:19:42.5800008Z 281 | def capture(ctx: click.Context, afb_id: str, ai_output: str, source: str, output: str) -> None:
2026-02-09T09:19:42.5800513Z 282 |     """捕獲 AI 輸出資料。
2026-02-09T09:19:42.5800734Z 283 |     
2026-02-09T09:19:42.5800918Z     | ^^^^
2026-02-09T09:19:42.5801272Z 284 |     輸出：output/captures/capture_<afb_id>_<source>_<timestamp>.json
2026-02-09T09:19:42.5801606Z 285 |     """
2026-02-09T09:19:42.5801798Z     |
2026-02-09T09:19:42.5802004Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5802185Z 
2026-02-09T09:19:42.5802287Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5802561Z    --> src/trust_wedo/cli.py:287:1
2026-02-09T09:19:42.5802795Z     |
2026-02-09T09:19:42.5802979Z 285 |     """
2026-02-09T09:19:42.5803279Z 286 |     click.echo(f"📥 捕獲 AI 輸出: {afb_id} (來源: {source})")
2026-02-09T09:19:42.5803797Z 287 |     
2026-02-09T09:19:42.5825200Z     | ^^^^
2026-02-09T09:19:42.5825495Z 288 |     manager = CaptureManager(output_dir=output)
2026-02-09T09:19:42.5825871Z 289 |     result = manager.capture(afb_id, ai_output, source)
2026-02-09T09:19:42.5826187Z     |
2026-02-09T09:19:42.5826394Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5826577Z 
2026-02-09T09:19:42.5826737Z F841 Local variable `result` is assigned to but never used
2026-02-09T09:19:42.5827089Z    --> src/trust_wedo/cli.py:289:5
2026-02-09T09:19:42.5827333Z     |
2026-02-09T09:19:42.5827579Z 288 |     manager = CaptureManager(output_dir=output)
2026-02-09T09:19:42.5827924Z 289 |     result = manager.capture(afb_id, ai_output, source)
2026-02-09T09:19:42.5828232Z     |     ^^^^^^
2026-02-09T09:19:42.5828427Z 290 |     
2026-02-09T09:19:42.5828829Z 291 |     # Find the latest file in output directory
2026-02-09T09:19:42.5829131Z     |
2026-02-09T09:19:42.5829358Z help: Remove assignment to unused variable `result`
2026-02-09T09:19:42.5829575Z 
2026-02-09T09:19:42.5829688Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5829968Z    --> src/trust_wedo/cli.py:290:1
2026-02-09T09:19:42.5830225Z     |
2026-02-09T09:19:42.5830451Z 288 |     manager = CaptureManager(output_dir=output)
2026-02-09T09:19:42.5830798Z 289 |     result = manager.capture(afb_id, ai_output, source)
2026-02-09T09:19:42.5831098Z 290 |     
2026-02-09T09:19:42.5831289Z     | ^^^^
2026-02-09T09:19:42.5831717Z 291 |     # Find the latest file in output directory
2026-02-09T09:19:42.5832157Z 292 |     latest_file = max(Path(output).glob("capture_*.json"), key=lambda p: p.stat().st_mtime)
2026-02-09T09:19:42.5832575Z     |
2026-02-09T09:19:42.5832779Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5832963Z 
2026-02-09T09:19:42.5833063Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5833331Z    --> src/trust_wedo/cli.py:293:1
2026-02-09T09:19:42.5833588Z     |
2026-02-09T09:19:42.5833930Z 291 |     # Find the latest file in output directory
2026-02-09T09:19:42.5834377Z 292 |     latest_file = max(Path(output).glob("capture_*.json"), key=lambda p: p.stat().st_mtime)
2026-02-09T09:19:42.5834802Z 293 |     
2026-02-09T09:19:42.5834987Z     | ^^^^
2026-02-09T09:19:42.5835297Z 294 |     click.echo(f"📄 已儲存至: {latest_file}")
2026-02-09T09:19:42.5835564Z     |
2026-02-09T09:19:42.5835764Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5835940Z 
2026-02-09T09:19:42.5836052Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5836314Z    --> src/trust_wedo/cli.py:295:1
2026-02-09T09:19:42.5836549Z     |
2026-02-09T09:19:42.5836802Z 294 |     click.echo(f"📄 已儲存至: {latest_file}")
2026-02-09T09:19:42.5837063Z 295 |     
2026-02-09T09:19:42.5837242Z     | ^^^^
2026-02-09T09:19:42.5837442Z 296 |     validator = SchemaValidator()
2026-02-09T09:19:42.5837780Z 297 |     is_valid, error = validator.validate_file(latest_file, "capture")
2026-02-09T09:19:42.5838132Z     |
2026-02-09T09:19:42.5838337Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5838520Z 
2026-02-09T09:19:42.5838787Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5839057Z    --> src/trust_wedo/cli.py:312:1
2026-02-09T09:19:42.5839311Z     |
2026-02-09T09:19:42.5839638Z 310 | def diff(ctx: click.Context, afb_id: str, captures_dir: str, output: str) -> None:
2026-02-09T09:19:42.5840084Z 311 |     """比對 AFB 與 Capture 的差異。
2026-02-09T09:19:42.5840326Z 312 |     
2026-02-09T09:19:42.5840516Z     | ^^^^
2026-02-09T09:19:42.5840805Z 313 |     輸出：output/diffs/diff_<afb_id>_<timestamp>.json
2026-02-09T09:19:42.5841114Z 314 |     """
2026-02-09T09:19:42.5841316Z     |
2026-02-09T09:19:42.5841522Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5841703Z 
2026-02-09T09:19:42.5841806Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5842076Z    --> src/trust_wedo/cli.py:316:1
2026-02-09T09:19:42.5842296Z     |
2026-02-09T09:19:42.5842482Z 314 |     """
2026-02-09T09:19:42.5842771Z 315 |     click.echo(f"🔍 開始差異分析: {afb_id}")
2026-02-09T09:19:42.5843029Z 316 |     
2026-02-09T09:19:42.5843209Z     | ^^^^
2026-02-09T09:19:42.5843392Z 317 |     # 1. Load AFB
2026-02-09T09:19:42.5843656Z 318 |     afb_path = Path("output/afb.json") # Default for MVP
2026-02-09T09:19:42.5843960Z     |
2026-02-09T09:19:42.5844152Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5844332Z 
2026-02-09T09:19:42.5844436Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5844726Z    --> src/trust_wedo/cli.py:322:1
2026-02-09T09:19:42.5844964Z     |
2026-02-09T09:19:42.5845232Z 320 |         click.echo(f"❌ 找不到 AFB 檔案: {afb_path}")
2026-02-09T09:19:42.5845512Z 321 |         ctx.exit(1)
2026-02-09T09:19:42.5845723Z 322 |         
2026-02-09T09:19:42.5845902Z     | ^^^^^^^^
2026-02-09T09:19:42.5846104Z 323 |     with open(afb_path) as f:
2026-02-09T09:19:42.5846352Z 324 |         afb_data = json.load(f)
2026-02-09T09:19:42.5846599Z     |
2026-02-09T09:19:42.5846805Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5846987Z 
2026-02-09T09:19:42.5847086Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5847359Z    --> src/trust_wedo/cli.py:325:1
2026-02-09T09:19:42.5847595Z     |
2026-02-09T09:19:42.5847797Z 323 |     with open(afb_path) as f:
2026-02-09T09:19:42.5848051Z 324 |         afb_data = json.load(f)
2026-02-09T09:19:42.5848296Z 325 |         
2026-02-09T09:19:42.5848479Z     | ^^^^^^^^
2026-02-09T09:19:42.5848833Z 326 |     if afb_data.get("afb_id") != afb_id:
2026-02-09T09:19:42.5849456Z 327 |         click.echo(f"⚠️  警告: 檔案內的 AFB ID ({afb_data.get('afb_id')}) 與參數 ({afb_id}) 不符")
2026-02-09T09:19:42.5849822Z     |
2026-02-09T09:19:42.5850029Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5850208Z 
2026-02-09T09:19:42.5850308Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5850579Z    --> src/trust_wedo/cli.py:328:1
2026-02-09T09:19:42.5850819Z     |
2026-02-09T09:19:42.5851024Z 326 |     if afb_data.get("afb_id") != afb_id:
2026-02-09T09:19:42.5851593Z 327 |         click.echo(f"⚠️  警告: 檔案內的 AFB ID ({afb_data.get('afb_id')}) 與參數 ({afb_id}) 不符")
2026-02-09T09:19:42.5851953Z 328 |     
2026-02-09T09:19:42.5852134Z     | ^^^^
2026-02-09T09:19:42.5852325Z 329 |     # 2. Load related Captures
2026-02-09T09:19:42.5852581Z 330 |     captures = []
2026-02-09T09:19:42.5852792Z     |
2026-02-09T09:19:42.5852998Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5853169Z 
2026-02-09T09:19:42.5853275Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5853562Z    --> src/trust_wedo/cli.py:336:1
2026-02-09T09:19:42.5853795Z     |
2026-02-09T09:19:42.5854002Z 334 |             if cap_data.get("afb_id") == afb_id:
2026-02-09T09:19:42.5854315Z 335 |                 captures.append(cap_data)
2026-02-09T09:19:42.5854578Z 336 |                 
2026-02-09T09:19:42.5854788Z     | ^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5854998Z 337 |     if not captures:
2026-02-09T09:19:42.5855329Z 338 |         click.echo(f"❌ 找不到與 {afb_id} 相關的 Capture 檔案")
2026-02-09T09:19:42.5855625Z     |
2026-02-09T09:19:42.5855839Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5856018Z 
2026-02-09T09:19:42.5856120Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5856392Z    --> src/trust_wedo/cli.py:340:1
2026-02-09T09:19:42.5856638Z     |
2026-02-09T09:19:42.5856914Z 338 |         click.echo(f"❌ 找不到與 {afb_id} 相關的 Capture 檔案")
2026-02-09T09:19:42.5857212Z 339 |         ctx.exit(1)
2026-02-09T09:19:42.5857421Z 340 |         
2026-02-09T09:19:42.5857623Z     | ^^^^^^^^
2026-02-09T09:19:42.5857913Z 341 |     click.echo(f"📂 找到 {len(captures)} 個相關 Capture")
2026-02-09T09:19:42.5858204Z     |
2026-02-09T09:19:42.5858407Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5858738Z 
2026-02-09T09:19:42.5858845Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5859109Z    --> src/trust_wedo/cli.py:342:1
2026-02-09T09:19:42.5859354Z     |
2026-02-09T09:19:42.5859646Z 341 |     click.echo(f"📂 找到 {len(captures)} 個相關 Capture")
2026-02-09T09:19:42.5859948Z 342 |     
2026-02-09T09:19:42.5860141Z     | ^^^^
2026-02-09T09:19:42.5860327Z 343 |     # 3. Analyze
2026-02-09T09:19:42.5860576Z 344 |     analyzer = DiffAnalyzer(afb_data, captures)
2026-02-09T09:19:42.5860858Z     |
2026-02-09T09:19:42.5861059Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5861235Z 
2026-02-09T09:19:42.5861331Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5861589Z    --> src/trust_wedo/cli.py:346:1
2026-02-09T09:19:42.5861842Z     |
2026-02-09T09:19:42.5862065Z 344 |     analyzer = DiffAnalyzer(afb_data, captures)
2026-02-09T09:19:42.5862406Z 345 |     result = analyzer.analyze(input_source=afb_id)
2026-02-09T09:19:42.5862696Z 346 |     
2026-02-09T09:19:42.5862884Z     | ^^^^
2026-02-09T09:19:42.5863068Z 347 |     # 4. Save
2026-02-09T09:19:42.5863293Z 348 |     output_path = Path(output)
2026-02-09T09:19:42.5863536Z     |
2026-02-09T09:19:42.5863741Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5863918Z 
2026-02-09T09:19:42.5864033Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5864302Z    --> src/trust_wedo/cli.py:354:1
2026-02-09T09:19:42.5864540Z     |
2026-02-09T09:19:42.5864736Z 352 |     clean_afb = afb_id.replace(":", "-")
2026-02-09T09:19:42.5865092Z 353 |     diff_json_path = output_path / f"diff_{clean_afb}_{timestamp}.json"
2026-02-09T09:19:42.5865431Z 354 |     
2026-02-09T09:19:42.5865616Z     | ^^^^
2026-02-09T09:19:42.5865821Z 355 |     with open(diff_json_path, "w") as f:
2026-02-09T09:19:42.5866285Z 356 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5866595Z     |
2026-02-09T09:19:42.5866793Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5866972Z 
2026-02-09T09:19:42.5867082Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5867357Z    --> src/trust_wedo/cli.py:357:1
2026-02-09T09:19:42.5867605Z     |
2026-02-09T09:19:42.5867812Z 355 |     with open(diff_json_path, "w") as f:
2026-02-09T09:19:42.5868148Z 356 |         json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5868692Z 357 |         
2026-02-09T09:19:42.5868893Z     | ^^^^^^^^
2026-02-09T09:19:42.5869190Z 358 |     click.echo(f"📄 已產生 Diff 檔案: {diff_json_path}")
2026-02-09T09:19:42.5869477Z     |
2026-02-09T09:19:42.5869680Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5869855Z 
2026-02-09T09:19:42.5869958Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5870228Z    --> src/trust_wedo/cli.py:359:1
2026-02-09T09:19:42.5870469Z     |
2026-02-09T09:19:42.5870758Z 358 |     click.echo(f"📄 已產生 Diff 檔案: {diff_json_path}")
2026-02-09T09:19:42.5871045Z 359 |     
2026-02-09T09:19:42.5871234Z     | ^^^^
2026-02-09T09:19:42.5871434Z 360 |     validator = SchemaValidator()
2026-02-09T09:19:42.5871782Z 361 |     is_valid, error = validator.validate_file(diff_json_path, "diff")
2026-02-09T09:19:42.5872133Z     |
2026-02-09T09:19:42.5872332Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5872509Z 
2026-02-09T09:19:42.5872606Z E501 Line too long (118 > 100)
2026-02-09T09:19:42.5872858Z    --> src/trust_wedo/cli.py:372:101
2026-02-09T09:19:42.5873109Z     |
2026-02-09T09:19:42.5873370Z 370 | @click.argument("bundle_dir", type=click.Path(exists=True))
2026-02-09T09:19:42.5873840Z 371 | @click.option("--output", "-o", default="output", help="輸出目錄")
2026-02-09T09:19:42.5874484Z 372 | @click.option("--format", "report_format", type=click.Choice(["md", "json", "both"]), default="both", help="報告格式")
2026-02-09T09:19:42.5875051Z     |                                                                                                     ^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5875408Z 373 | @click.pass_context
2026-02-09T09:19:42.5875799Z 374 | def report(ctx: click.Context, bundle_dir: str, output: str, report_format: str) -> None:
2026-02-09T09:19:42.5876203Z     |
2026-02-09T09:19:42.5876309Z 
2026-02-09T09:19:42.5876411Z W293 Blank line contains whitespace
2026-02-09T09:19:42.5876680Z    --> src/trust_wedo/cli.py:376:1
2026-02-09T09:19:42.5876919Z     |
2026-02-09T09:19:42.5877271Z 374 | def report(ctx: click.Context, bundle_dir: str, output: str, report_format: str) -> None:
2026-02-09T09:19:42.5877715Z 375 |     """產生最終信任報告。
2026-02-09T09:19:42.5877921Z 376 |     
2026-02-09T09:19:42.5878107Z     | ^^^^
2026-02-09T09:19:42.5878455Z 377 |     輸出：output/trust-wedo-report.md, output/trust-wedo-report.json
2026-02-09T09:19:42.5878906Z 378 |     """
2026-02-09T09:19:42.5879098Z     |
2026-02-09T09:19:42.5879298Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5879486Z 
2026-02-09T09:19:42.5879590Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5879864Z    --> src/trust_wedo/cli.py:380:1
2026-02-09T09:19:42.5880104Z     |
2026-02-09T09:19:42.5880287Z 378 |     """
2026-02-09T09:19:42.5880545Z 379 |     click.echo(f"📋 產生報告: {bundle_dir}")
2026-02-09T09:19:42.5880819Z 380 |     
2026-02-09T09:19:42.5881002Z     | ^^^^
2026-02-09T09:19:42.5881227Z 381 |     generator = ReportGenerator(bundle_dir)
2026-02-09T09:19:42.5881518Z 382 |     output_path = Path(output)
2026-02-09T09:19:42.5881770Z     |
2026-02-09T09:19:42.5881971Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5882144Z 
2026-02-09T09:19:42.5882244Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5882517Z    --> src/trust_wedo/cli.py:384:1
2026-02-09T09:19:42.5882755Z     |
2026-02-09T09:19:42.5882954Z 382 |     output_path = Path(output)
2026-02-09T09:19:42.5883246Z 383 |     output_path.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5883677Z 384 |     
2026-02-09T09:19:42.5883856Z     | ^^^^
2026-02-09T09:19:42.5884072Z 385 |     if report_format in ["json", "both"]:
2026-02-09T09:19:42.5884378Z 386 |         report_json = generator.generate_json()
2026-02-09T09:19:42.5884667Z     |
2026-02-09T09:19:42.5884872Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5885083Z 
2026-02-09T09:19:42.5885185Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5885454Z    --> src/trust_wedo/cli.py:391:1
2026-02-09T09:19:42.5885688Z     |
2026-02-09T09:19:42.5886065Z 389 |             json.dump(report_json, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5886504Z 390 |         click.echo(f"📄 已產生 JSON 報告: {report_json_path}")
2026-02-09T09:19:42.5886810Z 391 |         
2026-02-09T09:19:42.5887008Z     | ^^^^^^^^
2026-02-09T09:19:42.5887213Z 392 |     if report_format in ["md", "both"]:
2026-02-09T09:19:42.5887526Z 393 |         report_md = generator.generate_markdown()
2026-02-09T09:19:42.5887812Z     |
2026-02-09T09:19:42.5888028Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5888204Z 
2026-02-09T09:19:42.5888345Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.5888793Z  --> src/trust_wedo/core/afb_builder.py:3:1
2026-02-09T09:19:42.5889067Z   |
2026-02-09T09:19:42.5889283Z 1 | """AFB builder module for Trust WEDO."""
2026-02-09T09:19:42.5889552Z 2 |
2026-02-09T09:19:42.5889760Z 3 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.5890058Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5890343Z 4 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.5890630Z 5 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5890897Z   |
2026-02-09T09:19:42.5891002Z 
2026-02-09T09:19:42.5891135Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.5891453Z  --> src/trust_wedo/core/afb_builder.py:3:1
2026-02-09T09:19:42.5891724Z   |
2026-02-09T09:19:42.5891922Z 1 | """AFB builder module for Trust WEDO."""
2026-02-09T09:19:42.5892171Z 2 |
2026-02-09T09:19:42.5892385Z 3 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.5892665Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5892937Z 4 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.5893200Z 5 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5893470Z   |
2026-02-09T09:19:42.5893566Z 
2026-02-09T09:19:42.5893688Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5894004Z  --> src/trust_wedo/core/afb_builder.py:3:1
2026-02-09T09:19:42.5894279Z   |
2026-02-09T09:19:42.5894477Z 1 |   """AFB builder module for Trust WEDO."""
2026-02-09T09:19:42.5894746Z 2 |
2026-02-09T09:19:42.5894958Z 3 | / from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.5895254Z 4 | | from bs4 import BeautifulSoup
2026-02-09T09:19:42.5895532Z 5 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5895829Z   | |__________________________________________^
2026-02-09T09:19:42.5896086Z   |
2026-02-09T09:19:42.5896283Z help: Organize imports
2026-02-09T09:19:42.5896422Z 
2026-02-09T09:19:42.5896540Z F401 [*] `typing.List` imported but unused
2026-02-09T09:19:42.5896830Z  --> src/trust_wedo/core/afb_builder.py:3:26
2026-02-09T09:19:42.5897101Z   |
2026-02-09T09:19:42.5897297Z 1 | """AFB builder module for Trust WEDO."""
2026-02-09T09:19:42.5897556Z 2 |
2026-02-09T09:19:42.5897764Z 3 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.5898048Z   |                          ^^^^
2026-02-09T09:19:42.5898290Z 4 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.5898667Z 5 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5898941Z   |
2026-02-09T09:19:42.5899135Z help: Remove unused import
2026-02-09T09:19:42.5899279Z 
2026-02-09T09:19:42.5899401Z F401 [*] `typing.Optional` imported but unused
2026-02-09T09:19:42.5899700Z  --> src/trust_wedo/core/afb_builder.py:3:37
2026-02-09T09:19:42.5899966Z   |
2026-02-09T09:19:42.5900163Z 1 | """AFB builder module for Trust WEDO."""
2026-02-09T09:19:42.5900421Z 2 |
2026-02-09T09:19:42.5900750Z 3 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.5901044Z   |                                     ^^^^^^^^
2026-02-09T09:19:42.5901319Z 4 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.5901609Z 5 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5901898Z   |
2026-02-09T09:19:42.5902092Z help: Remove unused import
2026-02-09T09:19:42.5902236Z 
2026-02-09T09:19:42.5902383Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5902721Z   --> src/trust_wedo/core/afb_builder.py:11:59
2026-02-09T09:19:42.5903573Z    |
2026-02-09T09:19:42.5903829Z  9 |     """Builder for generating Answer-First Block (AFB)."""
2026-02-09T09:19:42.5904142Z 10 |
2026-02-09T09:19:42.5904416Z 11 |     def __init__(self, html_content: str, entity_profile: Dict[str, Any]):
2026-02-09T09:19:42.5904805Z    |                                                           ^^^^
2026-02-09T09:19:42.5905113Z 12 |         self.html_content = html_content
2026-02-09T09:19:42.5905415Z 13 |         self.entity_profile = entity_profile
2026-02-09T09:19:42.5905694Z    |
2026-02-09T09:19:42.5905885Z help: Replace with `dict`
2026-02-09T09:19:42.5906032Z 
2026-02-09T09:19:42.5906169Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5906504Z   --> src/trust_wedo/core/afb_builder.py:16:57
2026-02-09T09:19:42.5906777Z    |
2026-02-09T09:19:42.5907028Z 14 |         self.soup = BeautifulSoup(html_content, "html.parser")
2026-02-09T09:19:42.5907346Z 15 |
2026-02-09T09:19:42.5907626Z 16 |     def build(self, input_source: str = "page.html") -> Dict[str, Any]:
2026-02-09T09:19:42.5907996Z    |                                                         ^^^^
2026-02-09T09:19:42.5908303Z 17 |         """Build AFB JSON."""
2026-02-09T09:19:42.5908661Z 18 |         # Check eligibility
2026-02-09T09:19:42.5908904Z    |
2026-02-09T09:19:42.5909089Z help: Replace with `dict`
2026-02-09T09:19:42.5909235Z 
2026-02-09T09:19:42.5909337Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5909632Z   --> src/trust_wedo/core/afb_builder.py:44:1
2026-02-09T09:19:42.5909898Z    |
2026-02-09T09:19:42.5910089Z 42 |         # Extract text content
2026-02-09T09:19:42.5910352Z 43 |         content_text = self._extract_text()
2026-02-09T09:19:42.5910629Z 44 |         
2026-02-09T09:19:42.5910816Z    | ^^^^^^^^
2026-02-09T09:19:42.5911017Z 45 |         # Template based answer
2026-02-09T09:19:42.5911392Z 46 |         summary = content_text[:100] + "..." if len(content_text) > 100 else content_text
2026-02-09T09:19:42.5911785Z    |
2026-02-09T09:19:42.5911986Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5912172Z 
2026-02-09T09:19:42.5912295Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5912625Z  --> src/trust_wedo/core/capture_manager.py:3:1
2026-02-09T09:19:42.5912897Z   |
2026-02-09T09:19:42.5913112Z 1 |   """Capture manager module for Trust WEDO."""
2026-02-09T09:19:42.5913390Z 2 |
2026-02-09T09:19:42.5913582Z 3 | / import json
2026-02-09T09:19:42.5913796Z 4 | | from datetime import datetime
2026-02-09T09:19:42.5914062Z 5 | | from pathlib import Path
2026-02-09T09:19:42.5914304Z 6 | | from typing import Dict, Any
2026-02-09T09:19:42.5914585Z 7 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5914883Z   | |__________________________________________^
2026-02-09T09:19:42.5915135Z   |
2026-02-09T09:19:42.5915335Z help: Organize imports
2026-02-09T09:19:42.5915468Z 
2026-02-09T09:19:42.5915602Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.5915946Z  --> src/trust_wedo/core/capture_manager.py:6:1
2026-02-09T09:19:42.5916211Z   |
2026-02-09T09:19:42.5916415Z 4 | from datetime import datetime
2026-02-09T09:19:42.5916670Z 5 | from pathlib import Path
2026-02-09T09:19:42.5916926Z 6 | from typing import Dict, Any
2026-02-09T09:19:42.5917169Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5917427Z 7 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5917707Z   |
2026-02-09T09:19:42.5917941Z 
2026-02-09T09:19:42.5918087Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5918441Z   --> src/trust_wedo/core/capture_manager.py:17:80
2026-02-09T09:19:42.5918848Z    |
2026-02-09T09:19:42.5919089Z 15 |         self.output_dir.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.5919390Z 16 |
2026-02-09T09:19:42.5919727Z 17 |     def capture(self, afb_id: str, ai_output: str, source: str = "unknown") -> Dict[str, Any]:
2026-02-09T09:19:42.5920183Z    |                                                                                ^^^^
2026-02-09T09:19:42.5920641Z 18 |         """Capture AI output and save to JSON."""
2026-02-09T09:19:42.5920947Z 19 |         # Auto-increment capture_id
2026-02-09T09:19:42.5921201Z    |
2026-02-09T09:19:42.5921395Z help: Replace with `dict`
2026-02-09T09:19:42.5921537Z 
2026-02-09T09:19:42.5921640Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5921929Z   --> src/trust_wedo/core/capture_manager.py:22:1
2026-02-09T09:19:42.5922217Z    |
2026-02-09T09:19:42.5922492Z 20 |         capture_count = len(list(self.output_dir.glob("capture_*.json")))
2026-02-09T09:19:42.5922883Z 21 |         capture_id = f"cap:{capture_count + 1:03d}"
2026-02-09T09:19:42.5923169Z 22 |         
2026-02-09T09:19:42.5923361Z    | ^^^^^^^^
2026-02-09T09:19:42.5923585Z 23 |         now = datetime.utcnow().isoformat() + "Z"
2026-02-09T09:19:42.5923867Z    |
2026-02-09T09:19:42.5924058Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5924241Z 
2026-02-09T09:19:42.5924352Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5924646Z   --> src/trust_wedo/core/capture_manager.py:24:1
2026-02-09T09:19:42.5924923Z    |
2026-02-09T09:19:42.5925140Z 23 |         now = datetime.utcnow().isoformat() + "Z"
2026-02-09T09:19:42.5925421Z 24 |         
2026-02-09T09:19:42.5925619Z    | ^^^^^^^^
2026-02-09T09:19:42.5925811Z 25 |         result = {
2026-02-09T09:19:42.5926049Z 26 |             "capture_id": capture_id,
2026-02-09T09:19:42.5926308Z    |
2026-02-09T09:19:42.5926524Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5926704Z 
2026-02-09T09:19:42.5926813Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5927107Z   --> src/trust_wedo/core/capture_manager.py:33:1
2026-02-09T09:19:42.5927392Z    |
2026-02-09T09:19:42.5927595Z 31 |             "meta": get_meta("cli:manual")
2026-02-09T09:19:42.5927866Z 32 |         }
2026-02-09T09:19:42.5928055Z 33 |         
2026-02-09T09:19:42.5928252Z    | ^^^^^^^^
2026-02-09T09:19:42.5928509Z 34 |         # Filename: capture_<afb_id>_<source>_<timestamp>.json
2026-02-09T09:19:42.5928976Z 35 |         # Clean afb_id and source for filename
2026-02-09T09:19:42.5929256Z    |
2026-02-09T09:19:42.5929460Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5929642Z 
2026-02-09T09:19:42.5929752Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5930046Z   --> src/trust_wedo/core/capture_manager.py:40:1
2026-02-09T09:19:42.5930340Z    |
2026-02-09T09:19:42.5930581Z 38 |         timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
2026-02-09T09:19:42.5930993Z 39 |         filename = f"capture_{clean_afb}_{clean_source}_{timestamp}.json"
2026-02-09T09:19:42.5931339Z 40 |         
2026-02-09T09:19:42.5931542Z    | ^^^^^^^^
2026-02-09T09:19:42.5931763Z 41 |         file_path = self.output_dir / filename
2026-02-09T09:19:42.5932063Z 42 |         with open(file_path, "w") as f:
2026-02-09T09:19:42.5932328Z    |
2026-02-09T09:19:42.5932527Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5932711Z 
2026-02-09T09:19:42.5932819Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5933105Z   --> src/trust_wedo/core/capture_manager.py:44:1
2026-02-09T09:19:42.5933390Z    |
2026-02-09T09:19:42.5933586Z 42 |         with open(file_path, "w") as f:
2026-02-09T09:19:42.5933900Z 43 |             json.dump(result, f, indent=2, ensure_ascii=False)
2026-02-09T09:19:42.5934209Z 44 |             
2026-02-09T09:19:42.5934401Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5934601Z 45 |         return result
2026-02-09T09:19:42.5934949Z    |
2026-02-09T09:19:42.5935151Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5935326Z 
2026-02-09T09:19:42.5935462Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.5935807Z  --> src/trust_wedo/core/citation_evaluator.py:3:1
2026-02-09T09:19:42.5936089Z   |
2026-02-09T09:19:42.5936312Z 1 | """Citation evaluator module for Trust WEDO."""
2026-02-09T09:19:42.5936600Z 2 |
2026-02-09T09:19:42.5936797Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5937180Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5937455Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5937734Z   |
2026-02-09T09:19:42.5937831Z 
2026-02-09T09:19:42.5937966Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.5938306Z  --> src/trust_wedo/core/citation_evaluator.py:3:1
2026-02-09T09:19:42.5938684Z   |
2026-02-09T09:19:42.5938902Z 1 | """Citation evaluator module for Trust WEDO."""
2026-02-09T09:19:42.5939186Z 2 |
2026-02-09T09:19:42.5939385Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5939643Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5939910Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5940184Z   |
2026-02-09T09:19:42.5940357Z 
2026-02-09T09:19:42.5940477Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5940807Z  --> src/trust_wedo/core/citation_evaluator.py:3:1
2026-02-09T09:19:42.5941088Z   |
2026-02-09T09:19:42.5941311Z 1 |   """Citation evaluator module for Trust WEDO."""
2026-02-09T09:19:42.5941608Z 2 |
2026-02-09T09:19:42.5941804Z 3 | / from typing import Dict, List, Any
2026-02-09T09:19:42.5942099Z 4 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5942389Z   | |__________________________________________^
2026-02-09T09:19:42.5942654Z   |
2026-02-09T09:19:42.5942842Z help: Organize imports
2026-02-09T09:19:42.5942983Z 
2026-02-09T09:19:42.5943125Z UP006 [*] Use `list` instead of `List` for type annotation
2026-02-09T09:19:42.5943484Z   --> src/trust_wedo/core/citation_evaluator.py:10:48
2026-02-09T09:19:42.5943776Z    |
2026-02-09T09:19:42.5944054Z  8 |     """Evaluator for calculating Citation Confidence Score (CCS)."""
2026-02-09T09:19:42.5944391Z  9 |
2026-02-09T09:19:42.5944661Z 10 |     def __init__(self, afb_id: str, citations: List[Dict[str, Any]]):
2026-02-09T09:19:42.5945011Z    |                                                ^^^^
2026-02-09T09:19:42.5945293Z 11 |         self.afb_id = afb_id
2026-02-09T09:19:42.5945550Z 12 |         self.citations = citations
2026-02-09T09:19:42.5945802Z    |
2026-02-09T09:19:42.5945989Z help: Replace with `list`
2026-02-09T09:19:42.5946140Z 
2026-02-09T09:19:42.5946272Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5946620Z   --> src/trust_wedo/core/citation_evaluator.py:10:53
2026-02-09T09:19:42.5946899Z    |
2026-02-09T09:19:42.5947171Z  8 |     """Evaluator for calculating Citation Confidence Score (CCS)."""
2026-02-09T09:19:42.5947509Z  9 |
2026-02-09T09:19:42.5947768Z 10 |     def __init__(self, afb_id: str, citations: List[Dict[str, Any]]):
2026-02-09T09:19:42.5948117Z    |                                                     ^^^^
2026-02-09T09:19:42.5948395Z 11 |         self.afb_id = afb_id
2026-02-09T09:19:42.5948741Z 12 |         self.citations = citations
2026-02-09T09:19:42.5948994Z    |
2026-02-09T09:19:42.5949187Z help: Replace with `dict`
2026-02-09T09:19:42.5949329Z 
2026-02-09T09:19:42.5949465Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5949815Z   --> src/trust_wedo/core/citation_evaluator.py:14:59
2026-02-09T09:19:42.5950094Z    |
2026-02-09T09:19:42.5950301Z 12 |         self.citations = citations
2026-02-09T09:19:42.5950546Z 13 |
2026-02-09T09:19:42.5950831Z 14 |     def evaluate(self, input_source: str = "afb.json") -> Dict[str, Any]:
2026-02-09T09:19:42.5951214Z    |                                                           ^^^^
2026-02-09T09:19:42.5951513Z 15 |         """Evaluate all citations."""
2026-02-09T09:19:42.5951925Z 16 |         evaluated_citations = []
2026-02-09T09:19:42.5952170Z    |
2026-02-09T09:19:42.5952366Z help: Replace with `dict`
2026-02-09T09:19:42.5952510Z 
2026-02-09T09:19:42.5952611Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5952912Z   --> src/trust_wedo/core/citation_evaluator.py:24:1
2026-02-09T09:19:42.5953195Z    |
2026-02-09T09:19:42.5953460Z 22 |             base_score = 0.8 if cite.get("status") == "verified" else 0.5
2026-02-09T09:19:42.5953972Z 23 |             url = cite.get("url", "")
2026-02-09T09:19:42.5954230Z 24 |             
2026-02-09T09:19:42.5954429Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5954738Z 25 |             # Penalize if it's a social media link (less authoritative for citations)
2026-02-09T09:19:42.5955213Z 26 |             social_domains = ["twitter.com", "facebook.com", "linkedin.com"]
2026-02-09T09:19:42.5955560Z    |
2026-02-09T09:19:42.5955769Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5955953Z 
2026-02-09T09:19:42.5956057Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5956359Z   --> src/trust_wedo/core/citation_evaluator.py:29:1
2026-02-09T09:19:42.5956655Z    |
2026-02-09T09:19:42.5956874Z 27 |             if any(sd in url for sd in social_domains):
2026-02-09T09:19:42.5957179Z 28 |                 base_score -= 0.2
2026-02-09T09:19:42.5957418Z 29 |             
2026-02-09T09:19:42.5957611Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5957872Z 30 |             # Penalize if it's an old citation (simulating half-life)
2026-02-09T09:19:42.5958235Z 31 |             days_old = cite.get("days_old", 0)
2026-02-09T09:19:42.5958504Z    |
2026-02-09T09:19:42.5958717Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5958724Z 
2026-02-09T09:19:42.5958824Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5958953Z   --> src/trust_wedo/core/citation_evaluator.py:34:1
2026-02-09T09:19:42.5959039Z    |
2026-02-09T09:19:42.5959131Z 32 |             if days_old > 365:
2026-02-09T09:19:42.5959234Z 33 |                 base_score -= 0.1
2026-02-09T09:19:42.5959324Z 34 |             
2026-02-09T09:19:42.5959408Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5959519Z 35 |             ccs = max(0.0, min(1.0, base_score))
2026-02-09T09:19:42.5959601Z    |
2026-02-09T09:19:42.5959716Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5959721Z 
2026-02-09T09:19:42.5959820Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5959946Z   --> src/trust_wedo/core/citation_evaluator.py:36:1
2026-02-09T09:19:42.5960046Z    |
2026-02-09T09:19:42.5960153Z 35 |             ccs = max(0.0, min(1.0, base_score))
2026-02-09T09:19:42.5960238Z 36 |             
2026-02-09T09:19:42.5960323Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5960415Z 37 |             status = "accept"
2026-02-09T09:19:42.5960509Z 38 |             failure_states = []
2026-02-09T09:19:42.5960588Z    |
2026-02-09T09:19:42.5960702Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5960708Z 
2026-02-09T09:19:42.5960807Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5960936Z   --> src/trust_wedo/core/citation_evaluator.py:44:1
2026-02-09T09:19:42.5961026Z    |
2026-02-09T09:19:42.5961116Z 42 |             elif ccs < 0.75:
2026-02-09T09:19:42.5961216Z 43 |                 status = "downgrade"
2026-02-09T09:19:42.5961299Z 44 |             
2026-02-09T09:19:42.5961386Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5961496Z 45 |             evaluated_citations.append({
2026-02-09T09:19:42.5961644Z 46 |                 "citation_id": cite.get("citation_id", "cite:unknown"),
2026-02-09T09:19:42.5961735Z    |
2026-02-09T09:19:42.5961839Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5961844Z 
2026-02-09T09:19:42.5961994Z F841 Local variable `avg_ccs` is assigned to but never used
2026-02-09T09:19:42.5962126Z   --> src/trust_wedo/core/citation_evaluator.py:58:13
2026-02-09T09:19:42.5962211Z    |
2026-02-09T09:19:42.5962319Z 56 |             reasons = ["no_citations_found"]
2026-02-09T09:19:42.5962403Z 57 |         else:
2026-02-09T09:19:42.5962681Z 58 |             avg_ccs = overall_ccs / len(evaluated_citations)
2026-02-09T09:19:42.5962767Z    |             ^^^^^^^
2026-02-09T09:19:42.5962929Z 59 |             if all(c["status"] == "reject" for c in evaluated_citations):
2026-02-09T09:19:42.5963036Z 60 |                 decision = "reject"
2026-02-09T09:19:42.5963119Z    |
2026-02-09T09:19:42.5963255Z help: Remove assignment to unused variable `avg_ccs`
2026-02-09T09:19:42.5963261Z 
2026-02-09T09:19:42.5963390Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5963610Z  --> src/trust_wedo/core/diff_analyzer.py:3:1
2026-02-09T09:19:42.5963684Z   |
2026-02-09T09:19:42.5963796Z 1 |   """Diff analyzer module for Trust WEDO."""
2026-02-09T09:19:42.5963884Z 2 |
2026-02-09T09:19:42.5963970Z 3 | / import json
2026-02-09T09:19:42.5964070Z 4 | | from pathlib import Path
2026-02-09T09:19:42.5964178Z 5 | | from typing import Dict, List, Any
2026-02-09T09:19:42.5964452Z 6 | | from trust_wedo.core.similarity_calculator import calculate_similarity, get_text_differences
2026-02-09T09:19:42.5964573Z 7 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5964668Z   | |__________________________________________^
2026-02-09T09:19:42.5964757Z   |
2026-02-09T09:19:42.5964849Z help: Organize imports
2026-02-09T09:19:42.5964855Z 
2026-02-09T09:19:42.5964953Z F401 [*] `json` imported but unused
2026-02-09T09:19:42.5965075Z  --> src/trust_wedo/core/diff_analyzer.py:3:8
2026-02-09T09:19:42.5965158Z   |
2026-02-09T09:19:42.5965275Z 1 | """Diff analyzer module for Trust WEDO."""
2026-02-09T09:19:42.5965366Z 2 |
2026-02-09T09:19:42.5965455Z 3 | import json
2026-02-09T09:19:42.5965540Z   |        ^^^^
2026-02-09T09:19:42.5965638Z 4 | from pathlib import Path
2026-02-09T09:19:42.5965741Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.5965821Z   |
2026-02-09T09:19:42.5965924Z help: Remove unused import: `json`
2026-02-09T09:19:42.5965930Z 
2026-02-09T09:19:42.5966044Z F401 [*] `pathlib.Path` imported but unused
2026-02-09T09:19:42.5966164Z  --> src/trust_wedo/core/diff_analyzer.py:4:21
2026-02-09T09:19:42.5966244Z   |
2026-02-09T09:19:42.5966327Z 3 | import json
2026-02-09T09:19:42.5966429Z 4 | from pathlib import Path
2026-02-09T09:19:42.5966516Z   |                     ^^^^
2026-02-09T09:19:42.5966620Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.5966890Z 6 | from trust_wedo.core.similarity_calculator import calculate_similarity, get_text_differences
2026-02-09T09:19:42.5966972Z   |
2026-02-09T09:19:42.5967087Z help: Remove unused import: `pathlib.Path`
2026-02-09T09:19:42.5967097Z 
2026-02-09T09:19:42.5967237Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.5967353Z  --> src/trust_wedo/core/diff_analyzer.py:5:1
2026-02-09T09:19:42.5967436Z   |
2026-02-09T09:19:42.5967521Z 3 | import json
2026-02-09T09:19:42.5967629Z 4 | from pathlib import Path
2026-02-09T09:19:42.5967730Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.5967819Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5968088Z 6 | from trust_wedo.core.similarity_calculator import calculate_similarity, get_text_differences
2026-02-09T09:19:42.5968199Z 7 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5968277Z   |
2026-02-09T09:19:42.5968282Z 
2026-02-09T09:19:42.5968419Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.5968532Z  --> src/trust_wedo/core/diff_analyzer.py:5:1
2026-02-09T09:19:42.5968705Z   |
2026-02-09T09:19:42.5968796Z 3 | import json
2026-02-09T09:19:42.5968906Z 4 | from pathlib import Path
2026-02-09T09:19:42.5969005Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.5969093Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5969359Z 6 | from trust_wedo.core.similarity_calculator import calculate_similarity, get_text_differences
2026-02-09T09:19:42.5969470Z 7 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5969552Z   |
2026-02-09T09:19:42.5969557Z 
2026-02-09T09:19:42.5969704Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5969947Z   --> src/trust_wedo/core/diff_analyzer.py:13:34
2026-02-09T09:19:42.5970029Z    |
2026-02-09T09:19:42.5970161Z 11 |     """Analyzer for comparing AFB and AI Captures."""
2026-02-09T09:19:42.5970252Z 12 |
2026-02-09T09:19:42.5970448Z 13 |     def __init__(self, afb_data: Dict[str, Any], captures: List[Dict[str, Any]]):
2026-02-09T09:19:42.5970539Z    |                                  ^^^^
2026-02-09T09:19:42.5970642Z 14 |         self.afb_data = afb_data
2026-02-09T09:19:42.5970847Z 15 |         self.captures = captures
2026-02-09T09:19:42.5970935Z    |
2026-02-09T09:19:42.5971032Z help: Replace with `dict`
2026-02-09T09:19:42.5971044Z 
2026-02-09T09:19:42.5971182Z UP006 [*] Use `list` instead of `List` for type annotation
2026-02-09T09:19:42.5971301Z   --> src/trust_wedo/core/diff_analyzer.py:13:60
2026-02-09T09:19:42.5971384Z    |
2026-02-09T09:19:42.5971519Z 11 |     """Analyzer for comparing AFB and AI Captures."""
2026-02-09T09:19:42.5971604Z 12 |
2026-02-09T09:19:42.5971795Z 13 |     def __init__(self, afb_data: Dict[str, Any], captures: List[Dict[str, Any]]):
2026-02-09T09:19:42.5971916Z    |                                                            ^^^^
2026-02-09T09:19:42.5972011Z 14 |         self.afb_data = afb_data
2026-02-09T09:19:42.5972111Z 15 |         self.captures = captures
2026-02-09T09:19:42.5972203Z    |
2026-02-09T09:19:42.5972297Z help: Replace with `list`
2026-02-09T09:19:42.5972303Z 
2026-02-09T09:19:42.5972438Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5972562Z   --> src/trust_wedo/core/diff_analyzer.py:13:65
2026-02-09T09:19:42.5972649Z    |
2026-02-09T09:19:42.5972777Z 11 |     """Analyzer for comparing AFB and AI Captures."""
2026-02-09T09:19:42.5972860Z 12 |
2026-02-09T09:19:42.5973062Z 13 |     def __init__(self, afb_data: Dict[str, Any], captures: List[Dict[str, Any]]):
2026-02-09T09:19:42.5973173Z    |                                                                 ^^^^
2026-02-09T09:19:42.5973280Z 14 |         self.afb_data = afb_data
2026-02-09T09:19:42.5973382Z 15 |         self.captures = captures
2026-02-09T09:19:42.5973462Z    |
2026-02-09T09:19:42.5973555Z help: Replace with `dict`
2026-02-09T09:19:42.5973560Z 
2026-02-09T09:19:42.5973696Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5973817Z   --> src/trust_wedo/core/diff_analyzer.py:17:53
2026-02-09T09:19:42.5973897Z    |
2026-02-09T09:19:42.5973993Z 15 |         self.captures = captures
2026-02-09T09:19:42.5974084Z 16 |
2026-02-09T09:19:42.5974251Z 17 |     def analyze(self, input_source: str = "cli") -> Dict[str, Any]:
2026-02-09T09:19:42.5974354Z    |                                                     ^^^^
2026-02-09T09:19:42.5974456Z 18 |         """Perform diff analysis."""
2026-02-09T09:19:42.5974607Z 19 |         afb_answer = self.afb_data.get("ai_quick_answer", "")
2026-02-09T09:19:42.5974688Z    |
2026-02-09T09:19:42.5974783Z help: Replace with `dict`
2026-02-09T09:19:42.5974788Z 
2026-02-09T09:19:42.5974899Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5975015Z   --> src/trust_wedo/core/diff_analyzer.py:21:1
2026-02-09T09:19:42.5975101Z    |
2026-02-09T09:19:42.5975248Z 19 |         afb_answer = self.afb_data.get("ai_quick_answer", "")
2026-02-09T09:19:42.5975389Z 20 |         afb_id = self.afb_data.get("afb_id", "afb:unknown")
2026-02-09T09:19:42.5975473Z 21 |         
2026-02-09T09:19:42.5975557Z    | ^^^^^^^^
2026-02-09T09:19:42.5975661Z 22 |         comparisons = []
2026-02-09T09:19:42.5975762Z 23 |         total_similarity = 0.0
2026-02-09T09:19:42.5975843Z    |
2026-02-09T09:19:42.5975957Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5975963Z 
2026-02-09T09:19:42.5976066Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5976179Z   --> src/trust_wedo/core/diff_analyzer.py:24:1
2026-02-09T09:19:42.5976266Z    |
2026-02-09T09:19:42.5976358Z 22 |         comparisons = []
2026-02-09T09:19:42.5976454Z 23 |         total_similarity = 0.0
2026-02-09T09:19:42.5976620Z 24 |         
2026-02-09T09:19:42.5976711Z    | ^^^^^^^^
2026-02-09T09:19:42.5976808Z 25 |         best_source = None
2026-02-09T09:19:42.5976921Z 26 |         best_score = -1.0
2026-02-09T09:19:42.5977008Z    |
2026-02-09T09:19:42.5977114Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5977119Z 
2026-02-09T09:19:42.5977216Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5977331Z   --> src/trust_wedo/core/diff_analyzer.py:34:1
2026-02-09T09:19:42.5977421Z    |
2026-02-09T09:19:42.5977615Z 32 |             source = cap.get("source", "unknown")
2026-02-09T09:19:42.5977775Z 33 |             similarity = calculate_similarity(afb_answer, ai_output)
2026-02-09T09:19:42.5977865Z 34 |             
2026-02-09T09:19:42.5977948Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5978090Z 35 |             risk = self._detect_hallucination_risk(similarity)
2026-02-09T09:19:42.5978176Z    |
2026-02-09T09:19:42.5978279Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5978284Z 
2026-02-09T09:19:42.5978390Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5978503Z   --> src/trust_wedo/core/diff_analyzer.py:36:1
2026-02-09T09:19:42.5978691Z    |
2026-02-09T09:19:42.5978831Z 35 |             risk = self._detect_hallucination_risk(similarity)
2026-02-09T09:19:42.5978916Z 36 |             
2026-02-09T09:19:42.5979006Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5979107Z 37 |             comparisons.append({
2026-02-09T09:19:42.5979247Z 38 |                 "capture_id": cap.get("capture_id", "cap:unknown"),
2026-02-09T09:19:42.5979337Z    |
2026-02-09T09:19:42.5979443Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5979448Z 
2026-02-09T09:19:42.5979549Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5979666Z   --> src/trust_wedo/core/diff_analyzer.py:45:1
2026-02-09T09:19:42.5979757Z    |
2026-02-09T09:19:42.5979861Z 43 |                 "hallucination_risk": risk
2026-02-09T09:19:42.5979947Z 44 |             })
2026-02-09T09:19:42.5980034Z 45 |             
2026-02-09T09:19:42.5980122Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5980229Z 46 |             total_similarity += similarity
2026-02-09T09:19:42.5980309Z    |
2026-02-09T09:19:42.5980422Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5980427Z 
2026-02-09T09:19:42.5980528Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5980643Z   --> src/trust_wedo/core/diff_analyzer.py:47:1
2026-02-09T09:19:42.5980734Z    |
2026-02-09T09:19:42.5980840Z 46 |             total_similarity += similarity
2026-02-09T09:19:42.5980929Z 47 |             
2026-02-09T09:19:42.5981021Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5981125Z 48 |             if similarity > best_score:
2026-02-09T09:19:42.5981229Z 49 |                 best_score = similarity
2026-02-09T09:19:42.5981311Z    |
2026-02-09T09:19:42.5981425Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5981431Z 
2026-02-09T09:19:42.5981531Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5981644Z   --> src/trust_wedo/core/diff_analyzer.py:51:1
2026-02-09T09:19:42.5981741Z    |
2026-02-09T09:19:42.5981838Z 49 |                 best_score = similarity
2026-02-09T09:19:42.5981933Z 50 |                 best_source = source
2026-02-09T09:19:42.5982015Z 51 |             
2026-02-09T09:19:42.5982105Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.5982205Z 52 |             if similarity < worst_score:
2026-02-09T09:19:42.5982307Z 53 |                 worst_score = similarity
2026-02-09T09:19:42.5982398Z    |
2026-02-09T09:19:42.5982504Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5982513Z 
2026-02-09T09:19:42.5982648Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.5982767Z  --> src/trust_wedo/core/entity_scorer.py:3:1
2026-02-09T09:19:42.5982849Z   |
2026-02-09T09:19:42.5982956Z 1 | """Entity scorer module for Trust WEDO."""
2026-02-09T09:19:42.5983035Z 2 |
2026-02-09T09:19:42.5983145Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5983236Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5983477Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5983565Z   |
2026-02-09T09:19:42.5983571Z 
2026-02-09T09:19:42.5983701Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.5983812Z  --> src/trust_wedo/core/entity_scorer.py:3:1
2026-02-09T09:19:42.5983897Z   |
2026-02-09T09:19:42.5984004Z 1 | """Entity scorer module for Trust WEDO."""
2026-02-09T09:19:42.5984081Z 2 |
2026-02-09T09:19:42.5984186Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5984281Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5984492Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5984577Z   |
2026-02-09T09:19:42.5984583Z 
2026-02-09T09:19:42.5984712Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5984827Z  --> src/trust_wedo/core/entity_scorer.py:3:1
2026-02-09T09:19:42.5984904Z   |
2026-02-09T09:19:42.5985017Z 1 |   """Entity scorer module for Trust WEDO."""
2026-02-09T09:19:42.5985139Z 2 |
2026-02-09T09:19:42.5985243Z 3 | / from typing import Dict, List, Any
2026-02-09T09:19:42.5985365Z 4 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5985467Z   | |__________________________________________^
2026-02-09T09:19:42.5985548Z   |
2026-02-09T09:19:42.5985642Z help: Organize imports
2026-02-09T09:19:42.5985647Z 
2026-02-09T09:19:42.5985760Z F401 [*] `typing.List` imported but unused
2026-02-09T09:19:42.5985877Z  --> src/trust_wedo/core/entity_scorer.py:3:26
2026-02-09T09:19:42.5985956Z   |
2026-02-09T09:19:42.5986064Z 1 | """Entity scorer module for Trust WEDO."""
2026-02-09T09:19:42.5986157Z 2 |
2026-02-09T09:19:42.5986255Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5986341Z   |                          ^^^^
2026-02-09T09:19:42.5986460Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5986542Z   |
2026-02-09T09:19:42.5986654Z help: Remove unused import: `typing.List`
2026-02-09T09:19:42.5986660Z 
2026-02-09T09:19:42.5986802Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5986931Z   --> src/trust_wedo/core/entity_scorer.py:10:35
2026-02-09T09:19:42.5987011Z    |
2026-02-09T09:19:42.5987152Z  8 |     """Scorer for calculating Entity Confidence (EC)."""
2026-02-09T09:19:42.5987240Z  9 |
2026-02-09T09:19:42.5987363Z 10 |     def __init__(self, site_data: Dict[str, Any]):
2026-02-09T09:19:42.5987453Z    |                                   ^^^^
2026-02-09T09:19:42.5987557Z 11 |         self.site_data = site_data
2026-02-09T09:19:42.5987676Z 12 |         self.pages = site_data.get("pages", [])
2026-02-09T09:19:42.5987761Z    |
2026-02-09T09:19:42.5987858Z help: Replace with `dict`
2026-02-09T09:19:42.5987864Z 
2026-02-09T09:19:42.5988009Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.5988124Z   --> src/trust_wedo/core/entity_scorer.py:15:67
2026-02-09T09:19:42.5988209Z    |
2026-02-09T09:19:42.5988334Z 13 |         self.checks = site_data.get("checks", {})
2026-02-09T09:19:42.5988417Z 14 |
2026-02-09T09:19:42.5988715Z 15 |     def calculate_score(self, input_source: str = "site.json") -> Dict[str, Any]:
2026-02-09T09:19:42.5988845Z    |                                                                   ^^^^
2026-02-09T09:19:42.5988949Z 16 |         """Calculate EC and signals."""
2026-02-09T09:19:42.5989043Z 17 |         if not self.pages:
2026-02-09T09:19:42.5989125Z    |
2026-02-09T09:19:42.5989227Z help: Replace with `dict`
2026-02-09T09:19:42.5989234Z 
2026-02-09T09:19:42.5989326Z E501 Line too long (104 > 100)
2026-02-09T09:19:42.5989449Z   --> src/trust_wedo/core/entity_scorer.py:43:101
2026-02-09T09:19:42.5989541Z    |
2026-02-09T09:19:42.5989671Z 42 |         # 3. Citation: external links count (heuristic)
2026-02-09T09:19:42.5989949Z 43 |         avg_external_links = sum(p.get("external_links_count", 0) for p in self.pages) / len(self.pages)
2026-02-09T09:19:42.5990106Z    |                                                                                                     ^^^^
2026-02-09T09:19:42.5990278Z 44 |         citation = min(avg_external_links / 4.0, 1.0)  # Adjusted for MVP
2026-02-09T09:19:42.5990480Z    |
2026-02-09T09:19:42.5990486Z 
2026-02-09T09:19:42.5990588Z W291 [*] Trailing whitespace
2026-02-09T09:19:42.5990706Z   --> src/trust_wedo/core/entity_scorer.py:54:34
2026-02-09T09:19:42.5990786Z    |
2026-02-09T09:19:42.5990886Z 53 |         # EC formula (simplified)
2026-02-09T09:19:42.5990995Z 54 |         ec = (consistency * 0.3 + 
2026-02-09T09:19:42.5991085Z    |                                  ^
2026-02-09T09:19:42.5991282Z 55 |               authority * 0.25 + 
2026-02-09T09:19:42.5991381Z 56 |               citation * 0.15 + 
2026-02-09T09:19:42.5991465Z    |
2026-02-09T09:19:42.5991570Z help: Remove trailing whitespace
2026-02-09T09:19:42.5991575Z 
2026-02-09T09:19:42.5991668Z W291 [*] Trailing whitespace
2026-02-09T09:19:42.5991792Z   --> src/trust_wedo/core/entity_scorer.py:55:33
2026-02-09T09:19:42.5991872Z    |
2026-02-09T09:19:42.5991968Z 53 |         # EC formula (simplified)
2026-02-09T09:19:42.5992083Z 54 |         ec = (consistency * 0.3 + 
2026-02-09T09:19:42.5992178Z 55 |               authority * 0.25 + 
2026-02-09T09:19:42.5992267Z    |                                 ^
2026-02-09T09:19:42.5992369Z 56 |               citation * 0.15 + 
2026-02-09T09:19:42.5992465Z 57 |               frequency * 0.15 + 
2026-02-09T09:19:42.5992545Z    |
2026-02-09T09:19:42.5992647Z help: Remove trailing whitespace
2026-02-09T09:19:42.5992652Z 
2026-02-09T09:19:42.5992752Z W291 [*] Trailing whitespace
2026-02-09T09:19:42.5992877Z   --> src/trust_wedo/core/entity_scorer.py:56:32
2026-02-09T09:19:42.5992960Z    |
2026-02-09T09:19:42.5993063Z 54 |         ec = (consistency * 0.3 + 
2026-02-09T09:19:42.5993154Z 55 |               authority * 0.25 + 
2026-02-09T09:19:42.5993247Z 56 |               citation * 0.15 + 
2026-02-09T09:19:42.5993334Z    |                                ^
2026-02-09T09:19:42.5993434Z 57 |               frequency * 0.15 + 
2026-02-09T09:19:42.5993525Z 58 |               social * 0.15)
2026-02-09T09:19:42.5993611Z    |
2026-02-09T09:19:42.5993716Z help: Remove trailing whitespace
2026-02-09T09:19:42.5993721Z 
2026-02-09T09:19:42.5993819Z W291 [*] Trailing whitespace
2026-02-09T09:19:42.5993936Z   --> src/trust_wedo/core/entity_scorer.py:57:33
2026-02-09T09:19:42.5994028Z    |
2026-02-09T09:19:42.5994119Z 55 |               authority * 0.25 + 
2026-02-09T09:19:42.5994214Z 56 |               citation * 0.15 + 
2026-02-09T09:19:42.5994310Z 57 |               frequency * 0.15 + 
2026-02-09T09:19:42.5994402Z    |                                 ^
2026-02-09T09:19:42.5994499Z 58 |               social * 0.15)
2026-02-09T09:19:42.5994580Z    |
2026-02-09T09:19:42.5994688Z help: Remove trailing whitespace
2026-02-09T09:19:42.5994693Z 
2026-02-09T09:19:42.5994799Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.5994914Z   --> src/trust_wedo/core/entity_scorer.py:59:1
2026-02-09T09:19:42.5995001Z    |
2026-02-09T09:19:42.5995093Z 57 |               frequency * 0.15 + 
2026-02-09T09:19:42.5995188Z 58 |               social * 0.15)
2026-02-09T09:19:42.5995272Z 59 |         
2026-02-09T09:19:42.5995359Z    | ^^^^^^^^
2026-02-09T09:19:42.5995453Z 60 |         ec = round(ec, 2)
2026-02-09T09:19:42.5995584Z 61 |         eligibility = "pass" if ec >= 0.60 else "fail"
2026-02-09T09:19:42.5995671Z    |
2026-02-09T09:19:42.5995776Z help: Remove whitespace from blank line
2026-02-09T09:19:42.5995781Z 
2026-02-09T09:19:42.5995917Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.5996032Z  --> src/trust_wedo/core/graph_builder.py:3:1
2026-02-09T09:19:42.5996126Z   |
2026-02-09T09:19:42.5996235Z 1 | """Graph builder module for Trust WEDO."""
2026-02-09T09:19:42.5996312Z 2 |
2026-02-09T09:19:42.5996422Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5996508Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5996622Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5996705Z   |
2026-02-09T09:19:42.5996716Z 
2026-02-09T09:19:42.5996854Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.5997054Z  --> src/trust_wedo/core/graph_builder.py:3:1
2026-02-09T09:19:42.5997133Z   |
2026-02-09T09:19:42.5997247Z 1 | """Graph builder module for Trust WEDO."""
2026-02-09T09:19:42.5997327Z 2 |
2026-02-09T09:19:42.5997428Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5997527Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.5997641Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5997721Z   |
2026-02-09T09:19:42.5997726Z 
2026-02-09T09:19:42.5997920Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.5998044Z  --> src/trust_wedo/core/graph_builder.py:3:1
2026-02-09T09:19:42.5998120Z   |
2026-02-09T09:19:42.5998231Z 1 |   """Graph builder module for Trust WEDO."""
2026-02-09T09:19:42.5998319Z 2 |
2026-02-09T09:19:42.5998424Z 3 | / from typing import Dict, List, Any
2026-02-09T09:19:42.5998642Z 4 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5998751Z   | |__________________________________________^
2026-02-09T09:19:42.5998840Z   |
2026-02-09T09:19:42.5998940Z help: Organize imports
2026-02-09T09:19:42.5998945Z 
2026-02-09T09:19:42.5999051Z F401 [*] `typing.List` imported but unused
2026-02-09T09:19:42.5999171Z  --> src/trust_wedo/core/graph_builder.py:3:26
2026-02-09T09:19:42.5999248Z   |
2026-02-09T09:19:42.5999356Z 1 | """Graph builder module for Trust WEDO."""
2026-02-09T09:19:42.5999446Z 2 |
2026-02-09T09:19:42.5999551Z 3 | from typing import Dict, List, Any
2026-02-09T09:19:42.5999644Z   |                          ^^^^
2026-02-09T09:19:42.5999758Z 4 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.5999849Z   |
2026-02-09T09:19:42.5999959Z help: Remove unused import: `typing.List`
2026-02-09T09:19:42.5999965Z 
2026-02-09T09:19:42.6000107Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6000228Z   --> src/trust_wedo/core/graph_builder.py:10:37
2026-02-09T09:19:42.6000312Z    |
2026-02-09T09:19:42.6000470Z  8 |     """Builder for generating Entity Graph and risk metrics."""
2026-02-09T09:19:42.6000562Z  9 |
2026-02-09T09:19:42.6000692Z 10 |     def __init__(self, bundle_data: Dict[str, Any]):
2026-02-09T09:19:42.6000787Z    |                                     ^^^^
2026-02-09T09:19:42.6000931Z 11 |         self.entity_profile = bundle_data.get("entity", {})
2026-02-09T09:19:42.6001047Z 12 |         self.afb = bundle_data.get("afb", {})
2026-02-09T09:19:42.6001127Z    |
2026-02-09T09:19:42.6001219Z help: Replace with `dict`
2026-02-09T09:19:42.6001230Z 
2026-02-09T09:19:42.6001374Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6001489Z   --> src/trust_wedo/core/graph_builder.py:15:54
2026-02-09T09:19:42.6001571Z    |
2026-02-09T09:19:42.6001722Z 13 |         self.citation_eval = bundle_data.get("citation", {})
2026-02-09T09:19:42.6001801Z 14 |
2026-02-09T09:19:42.6001968Z 15 |     def build(self, input_source: str = "bundle") -> Dict[str, Any]:
2026-02-09T09:19:42.6002075Z    |                                                      ^^^^
2026-02-09T09:19:42.6002186Z 16 |         """Build Graph JSON."""
2026-02-09T09:19:42.6002358Z 17 |         entity_id = self.entity_profile.get("entity_id", "ent:unknown")
2026-02-09T09:19:42.6002437Z    |
2026-02-09T09:19:42.6002539Z help: Replace with `dict`
2026-02-09T09:19:42.6002545Z 
2026-02-09T09:19:42.6002649Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6002767Z   --> src/trust_wedo/core/graph_builder.py:18:1
2026-02-09T09:19:42.6002858Z    |
2026-02-09T09:19:42.6002957Z 16 |         """Build Graph JSON."""
2026-02-09T09:19:42.6003123Z 17 |         entity_id = self.entity_profile.get("entity_id", "ent:unknown")
2026-02-09T09:19:42.6003209Z 18 |         
2026-02-09T09:19:42.6003298Z    | ^^^^^^^^
2026-02-09T09:19:42.6003389Z 19 |         # Calculate metrics
2026-02-09T09:19:42.6003528Z 20 |         citations = self.citation_eval.get("citations", [])
2026-02-09T09:19:42.6003619Z    |
2026-02-09T09:19:42.6003725Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6003849Z 
2026-02-09T09:19:42.6003952Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6004069Z   --> src/trust_wedo/core/graph_builder.py:24:1
2026-02-09T09:19:42.6004151Z    |
2026-02-09T09:19:42.6004270Z 22 |         # For MVP, we'll just count the citations
2026-02-09T09:19:42.6004457Z 23 |         distinct_sources = len(set(c.get("citation_id") for c in citations))
2026-02-09T09:19:42.6004544Z 24 |         
2026-02-09T09:19:42.6004625Z    | ^^^^^^^^
2026-02-09T09:19:42.6004732Z 25 |         is_isolated = distinct_sources == 0
2026-02-09T09:19:42.6004963Z 26 |         single_source_risk = distinct_sources == 1
2026-02-09T09:19:42.6005047Z    |
2026-02-09T09:19:42.6005157Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6005162Z 
2026-02-09T09:19:42.6005282Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6005409Z  --> src/trust_wedo/core/report_generator.py:3:1
2026-02-09T09:19:42.6005488Z   |
2026-02-09T09:19:42.6005606Z 1 |   """Report generator module for Trust WEDO."""
2026-02-09T09:19:42.6005702Z 2 |
2026-02-09T09:19:42.6005788Z 3 | / import json
2026-02-09T09:19:42.6005887Z 4 | | from pathlib import Path
2026-02-09T09:19:42.6006001Z 5 | | from typing import Dict, List, Any
2026-02-09T09:19:42.6006120Z 6 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.6006216Z   | |__________________________________________^
2026-02-09T09:19:42.6006296Z   |
2026-02-09T09:19:42.6006397Z help: Organize imports
2026-02-09T09:19:42.6006403Z 
2026-02-09T09:19:42.6006543Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.6006663Z  --> src/trust_wedo/core/report_generator.py:5:1
2026-02-09T09:19:42.6006751Z   |
2026-02-09T09:19:42.6006839Z 3 | import json
2026-02-09T09:19:42.6006936Z 4 | from pathlib import Path
2026-02-09T09:19:42.6007039Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.6007134Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6007247Z 6 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.6007331Z   |
2026-02-09T09:19:42.6007337Z 
2026-02-09T09:19:42.6007473Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.6007592Z  --> src/trust_wedo/core/report_generator.py:5:1
2026-02-09T09:19:42.6007678Z   |
2026-02-09T09:19:42.6007775Z 3 | import json
2026-02-09T09:19:42.6007874Z 4 | from pathlib import Path
2026-02-09T09:19:42.6007979Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.6008065Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6008184Z 6 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.6008266Z   |
2026-02-09T09:19:42.6008271Z 
2026-02-09T09:19:42.6008378Z F401 [*] `typing.List` imported but unused
2026-02-09T09:19:42.6008506Z  --> src/trust_wedo/core/report_generator.py:5:26
2026-02-09T09:19:42.6008681Z   |
2026-02-09T09:19:42.6008766Z 3 | import json
2026-02-09T09:19:42.6008872Z 4 | from pathlib import Path
2026-02-09T09:19:42.6008972Z 5 | from typing import Dict, List, Any
2026-02-09T09:19:42.6009057Z   |                          ^^^^
2026-02-09T09:19:42.6009178Z 6 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.6009263Z   |
2026-02-09T09:19:42.6009375Z help: Remove unused import: `typing.List`
2026-02-09T09:19:42.6009381Z 
2026-02-09T09:19:42.6009515Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6009646Z   --> src/trust_wedo/core/report_generator.py:14:20
2026-02-09T09:19:42.6009728Z    |
2026-02-09T09:19:42.6009836Z 12 |     def __init__(self, bundle_dir: str):
2026-02-09T09:19:42.6009954Z 13 |         self.bundle_path = Path(bundle_dir)
2026-02-09T09:19:42.6010061Z 14 |         self.data: Dict[str, Any] = {}
2026-02-09T09:19:42.6010150Z    |                    ^^^^
2026-02-09T09:19:42.6010244Z 15 |         self._load_bundle()
2026-02-09T09:19:42.6010332Z    |
2026-02-09T09:19:42.6010431Z help: Replace with `dict`
2026-02-09T09:19:42.6010437Z 
2026-02-09T09:19:42.6010574Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6010863Z   --> src/trust_wedo/core/report_generator.py:32:32
2026-02-09T09:19:42.6010948Z    |
2026-02-09T09:19:42.6011059Z 30 |                     self.data[key] = json.load(f)
2026-02-09T09:19:42.6011141Z 31 |
2026-02-09T09:19:42.6011263Z 32 |     def generate_json(self) -> Dict[str, Any]:
2026-02-09T09:19:42.6011353Z    |                                ^^^^
2026-02-09T09:19:42.6011465Z 33 |         """Generate aggregated JSON report."""
2026-02-09T09:19:42.6011562Z 34 |         return {
2026-02-09T09:19:42.6011645Z    |
2026-02-09T09:19:42.6011843Z help: Replace with `dict`
2026-02-09T09:19:42.6011849Z 
2026-02-09T09:19:42.6011948Z E501 Line too long (111 > 100)
2026-02-09T09:19:42.6012078Z   --> src/trust_wedo/core/report_generator.py:41:101
2026-02-09T09:19:42.6012161Z    |
2026-02-09T09:19:42.6012339Z 39 |                 "eligibility": self.data.get("entity", {}).get("eligibility"),
2026-02-09T09:19:42.6012538Z 40 |                 "citation_decision": self.data.get("citation", {}).get("decision"),
2026-02-09T09:19:42.6012808Z 41 |                 "risk_detected": self.data.get("graph", {}).get("metrics", {}).get("single_source_risk", False)
2026-02-09T09:19:42.6013391Z    |                                                                                                     ^^^^^^^^^^^
2026-02-09T09:19:42.6013494Z 42 |             },
2026-02-09T09:19:42.6013595Z 43 |             "details": self.data
2026-02-09T09:19:42.6013769Z    |
2026-02-09T09:19:42.6013779Z 
2026-02-09T09:19:42.6014012Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6014218Z   --> src/trust_wedo/core/report_generator.py:51:1
2026-02-09T09:19:42.6014326Z    |
2026-02-09T09:19:42.6014504Z 49 |         citation = self.data.get("citation", {})
2026-02-09T09:19:42.6014722Z 50 |         graph = self.data.get("graph", {}).get("metrics", {})
2026-02-09T09:19:42.6014838Z 51 |         
2026-02-09T09:19:42.6014947Z    | ^^^^^^^^
2026-02-09T09:19:42.6015307Z 52 |         md = f"""# Trust WEDO 信任評估報告
2026-02-09T09:19:42.6015417Z    |
2026-02-09T09:19:42.6015584Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6015592Z 
2026-02-09T09:19:42.6015746Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6015946Z   --> src/trust_wedo/core/similarity_calculator.py:19:1
2026-02-09T09:19:42.6016052Z    |
2026-02-09T09:19:42.6016175Z 17 |     if text1 == text2:
2026-02-09T09:19:42.6016299Z 18 |         return []
2026-02-09T09:19:42.6016408Z 19 |     
2026-02-09T09:19:42.6016513Z    | ^^^^
2026-02-09T09:19:42.6016720Z 20 |     similarity = calculate_similarity(text1, text2)
2026-02-09T09:19:42.6016867Z 21 |     if similarity > 0.95:
2026-02-09T09:19:42.6016973Z    |
2026-02-09T09:19:42.6017125Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6017140Z 
2026-02-09T09:19:42.6017316Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6017497Z  --> src/trust_wedo/parsers/site_parser.py:3:1
2026-02-09T09:19:42.6017656Z   |
2026-02-09T09:19:42.6017828Z 1 |   """Site parser module for Trust WEDO."""
2026-02-09T09:19:42.6017952Z 2 |
2026-02-09T09:19:42.6018083Z 3 | / import json
2026-02-09T09:19:42.6018238Z 4 | | from datetime import datetime
2026-02-09T09:19:42.6018440Z 5 | | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.6018792Z 6 | | import httpx
2026-02-09T09:19:42.6018961Z 7 | | from bs4 import BeautifulSoup
2026-02-09T09:19:42.6019150Z 8 | | from urllib.parse import urljoin, urlparse
2026-02-09T09:19:42.6019322Z 9 | | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.6019454Z   | |__________________________________________^
2026-02-09T09:19:42.6019576Z   |
2026-02-09T09:19:42.6019704Z help: Organize imports
2026-02-09T09:19:42.6019712Z 
2026-02-09T09:19:42.6019850Z F401 [*] `json` imported but unused
2026-02-09T09:19:42.6020073Z  --> src/trust_wedo/parsers/site_parser.py:3:8
2026-02-09T09:19:42.6020191Z   |
2026-02-09T09:19:42.6020347Z 1 | """Site parser module for Trust WEDO."""
2026-02-09T09:19:42.6020452Z 2 |
2026-02-09T09:19:42.6020578Z 3 | import json
2026-02-09T09:19:42.6020924Z   |        ^^^^
2026-02-09T09:19:42.6021070Z 4 | from datetime import datetime
2026-02-09T09:19:42.6021248Z 5 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.6021364Z   |
2026-02-09T09:19:42.6021508Z help: Remove unused import: `json`
2026-02-09T09:19:42.6021518Z 
2026-02-09T09:19:42.6021702Z F401 [*] `datetime.datetime` imported but unused
2026-02-09T09:19:42.6021899Z  --> src/trust_wedo/parsers/site_parser.py:4:22
2026-02-09T09:19:42.6022012Z   |
2026-02-09T09:19:42.6022134Z 3 | import json
2026-02-09T09:19:42.6022467Z 4 | from datetime import datetime
2026-02-09T09:19:42.6022598Z   |                      ^^^^^^^^
2026-02-09T09:19:42.6022716Z 5 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.6022806Z 6 | import httpx
2026-02-09T09:19:42.6022894Z   |
2026-02-09T09:19:42.6023017Z help: Remove unused import: `datetime.datetime`
2026-02-09T09:19:42.6023023Z 
2026-02-09T09:19:42.6023160Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.6023295Z  --> src/trust_wedo/parsers/site_parser.py:5:1
2026-02-09T09:19:42.6023373Z   |
2026-02-09T09:19:42.6023459Z 3 | import json
2026-02-09T09:19:42.6023554Z 4 | from datetime import datetime
2026-02-09T09:19:42.6023677Z 5 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.6023770Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6023856Z 6 | import httpx
2026-02-09T09:19:42.6023960Z 7 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.6024042Z   |
2026-02-09T09:19:42.6024047Z 
2026-02-09T09:19:42.6024188Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.6024309Z  --> src/trust_wedo/parsers/site_parser.py:5:1
2026-02-09T09:19:42.6024387Z   |
2026-02-09T09:19:42.6024470Z 3 | import json
2026-02-09T09:19:42.6024564Z 4 | from datetime import datetime
2026-02-09T09:19:42.6024687Z 5 | from typing import Dict, List, Any, Optional
2026-02-09T09:19:42.6024780Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6024868Z 6 | import httpx
2026-02-09T09:19:42.6024979Z 7 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.6025054Z   |
2026-02-09T09:19:42.6025059Z 
2026-02-09T09:19:42.6025186Z F401 [*] `urllib.parse.urljoin` imported but unused
2026-02-09T09:19:42.6025301Z  --> src/trust_wedo/parsers/site_parser.py:8:26
2026-02-09T09:19:42.6025395Z   |
2026-02-09T09:19:42.6025480Z 6 | import httpx
2026-02-09T09:19:42.6025578Z 7 | from bs4 import BeautifulSoup
2026-02-09T09:19:42.6025699Z 8 | from urllib.parse import urljoin, urlparse
2026-02-09T09:19:42.6025796Z   |                          ^^^^^^^
2026-02-09T09:19:42.6026083Z 9 | from trust_wedo.utils.meta import get_meta
2026-02-09T09:19:42.6026285Z   |
2026-02-09T09:19:42.6026464Z help: Remove unused import: `urllib.parse.urljoin`
2026-02-09T09:19:42.6026470Z 
2026-02-09T09:19:42.6026646Z UP006 [*] Use `list` instead of `List` for type annotation
2026-02-09T09:19:42.6026802Z   --> src/trust_wedo/parsers/site_parser.py:18:21
2026-02-09T09:19:42.6026925Z    |
2026-02-09T09:19:42.6027282Z 16 |         self.base_url = base_url.rstrip("/")
2026-02-09T09:19:42.6027424Z 17 |         self.max_pages = max_pages
2026-02-09T09:19:42.6027575Z 18 |         self.pages: List[Dict[str, Any]] = []
2026-02-09T09:19:42.6027705Z    |                     ^^^^
2026-02-09T09:19:42.6027967Z 19 |         self.checks = {"robots_ok": False, "sitemap_ok": False}
2026-02-09T09:19:42.6028082Z 20 |         self.visited_urls = set()
2026-02-09T09:19:42.6028250Z    |
2026-02-09T09:19:42.6028438Z help: Replace with `list`
2026-02-09T09:19:42.6028449Z 
2026-02-09T09:19:42.6028914Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6029109Z   --> src/trust_wedo/parsers/site_parser.py:18:26
2026-02-09T09:19:42.6029255Z    |
2026-02-09T09:19:42.6029388Z 16 |         self.base_url = base_url.rstrip("/")
2026-02-09T09:19:42.6029582Z 17 |         self.max_pages = max_pages
2026-02-09T09:19:42.6029783Z 18 |         self.pages: List[Dict[str, Any]] = []
2026-02-09T09:19:42.6029912Z    |                          ^^^^
2026-02-09T09:19:42.6030289Z 19 |         self.checks = {"robots_ok": False, "sitemap_ok": False}
2026-02-09T09:19:42.6030429Z 20 |         self.visited_urls = set()
2026-02-09T09:19:42.6030561Z    |
2026-02-09T09:19:42.6030744Z help: Replace with `dict`
2026-02-09T09:19:42.6030751Z 
2026-02-09T09:19:42.6030946Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6031141Z   --> src/trust_wedo/parsers/site_parser.py:22:29
2026-02-09T09:19:42.6031255Z    |
2026-02-09T09:19:42.6031386Z 20 |         self.visited_urls = set()
2026-02-09T09:19:42.6031629Z 21 |
2026-02-09T09:19:42.6031833Z 22 |     async def scan(self) -> Dict[str, Any]:
2026-02-09T09:19:42.6031971Z    |                             ^^^^
2026-02-09T09:19:42.6032131Z 23 |         """Perform site scan."""
2026-02-09T09:19:42.6032382Z 24 |         async with httpx.AsyncClient(follow_redirects=True) as client:
2026-02-09T09:19:42.6032493Z    |
2026-02-09T09:19:42.6032623Z help: Replace with `dict`
2026-02-09T09:19:42.6032629Z 
2026-02-09T09:19:42.6032873Z UP006 [*] Use `list` instead of `List` for type annotation
2026-02-09T09:19:42.6033049Z   --> src/trust_wedo/parsers/site_parser.py:63:70
2026-02-09T09:19:42.6033165Z    |
2026-02-09T09:19:42.6033317Z 61 |         }
2026-02-09T09:19:42.6033430Z 62 |
2026-02-09T09:19:42.6033671Z 63 |     async def _find_sitemap_urls(self, client: httpx.AsyncClient) -> List[str]:
2026-02-09T09:19:42.6033805Z    |                                                                      ^^^^
2026-02-09T09:19:42.6034082Z 64 |         """Find URLs from sitemap.xml."""
2026-02-09T09:19:42.6034245Z 65 |         sitemap_url = f"{self.base_url}/sitemap.xml"
2026-02-09T09:19:42.6034356Z    |
2026-02-09T09:19:42.6044244Z help: Replace with `list`
2026-02-09T09:19:42.6044272Z 
2026-02-09T09:19:42.6044439Z UP045 [*] Use `X | None` for type annotations
2026-02-09T09:19:42.6044584Z   --> src/trust_wedo/parsers/site_parser.py:76:72
2026-02-09T09:19:42.6044670Z    |
2026-02-09T09:19:42.6044765Z 74 |         return []
2026-02-09T09:19:42.6044857Z 75 |
2026-02-09T09:19:42.6045134Z 76 |     async def _scan_page(self, client: httpx.AsyncClient, url: str) -> Optional[Dict[str, Any]]:
2026-02-09T09:19:42.6045284Z    |                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6045387Z 77 |         """Scan a single page."""
2026-02-09T09:19:42.6045492Z 78 |         if url in self.visited_urls:
2026-02-09T09:19:42.6045575Z    |
2026-02-09T09:19:42.6045683Z help: Convert to `X | None`
2026-02-09T09:19:42.6045695Z 
2026-02-09T09:19:42.6045842Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6045973Z   --> src/trust_wedo/parsers/site_parser.py:76:81
2026-02-09T09:19:42.6046060Z    |
2026-02-09T09:19:42.6046152Z 74 |         return []
2026-02-09T09:19:42.6046233Z 75 |
2026-02-09T09:19:42.6046487Z 76 |     async def _scan_page(self, client: httpx.AsyncClient, url: str) -> Optional[Dict[str, Any]]:
2026-02-09T09:19:42.6046623Z    |                                                                                 ^^^^
2026-02-09T09:19:42.6046722Z 77 |         """Scan a single page."""
2026-02-09T09:19:42.6046824Z 78 |         if url in self.visited_urls:
2026-02-09T09:19:42.6046910Z    |
2026-02-09T09:19:42.6047005Z help: Replace with `dict`
2026-02-09T09:19:42.6047011Z 
2026-02-09T09:19:42.6047114Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6047243Z    --> src/trust_wedo/parsers/site_parser.py:104:1
2026-02-09T09:19:42.6047326Z     |
2026-02-09T09:19:42.6047422Z 102 |             if fetched and soup:
2026-02-09T09:19:42.6047618Z 103 |                 has_jsonld = bool(soup.find("script", type="application/ld+json"))
2026-02-09T09:19:42.6047703Z 104 |                 
2026-02-09T09:19:42.6047783Z     | ^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6047889Z 105 |                 title = soup.find("title")
2026-02-09T09:19:42.6048094Z 106 |                 has_meta_desc = bool(soup.find("meta", attrs={"name": "description"}))
2026-02-09T09:19:42.6048369Z     |
2026-02-09T09:19:42.6048478Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6048484Z 
2026-02-09T09:19:42.6048787Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6048919Z    --> src/trust_wedo/parsers/site_parser.py:108:1
2026-02-09T09:19:42.6048998Z     |
2026-02-09T09:19:42.6049196Z 106 |                 has_meta_desc = bool(soup.find("meta", attrs={"name": "description"}))
2026-02-09T09:19:42.6049298Z 107 |                 has_meta = has_meta_desc
2026-02-09T09:19:42.6049381Z 108 |                 
2026-02-09T09:19:42.6049591Z     | ^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6049714Z 109 |                 # Check for about/author pages
2026-02-09T09:19:42.6050096Z 110 |                 about_author_keywords = ["about", "author", "team", "contact", "關於", "作者"]
2026-02-09T09:19:42.6050177Z     |
2026-02-09T09:19:42.6050291Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6050297Z 
2026-02-09T09:19:42.6050398Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6050531Z    --> src/trust_wedo/parsers/site_parser.py:113:1
2026-02-09T09:19:42.6050613Z     |
2026-02-09T09:19:42.6050743Z 111 |                 url_path = urlparse(url).path.lower()
2026-02-09T09:19:42.6050944Z 112 |                 is_about_author = any(kw in url_path for kw in about_author_keywords)
2026-02-09T09:19:42.6051034Z 113 |                 
2026-02-09T09:19:42.6051124Z     | ^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6051226Z 114 |                 # Count external links
2026-02-09T09:19:42.6051356Z 115 |                 all_links = soup.find_all("a", href=True)
2026-02-09T09:19:42.6051454Z     |
2026-02-09T09:19:42.6051560Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6051566Z 
2026-02-09T09:19:42.6051664Z E741 Ambiguous variable name: `l`
2026-02-09T09:19:42.6051797Z    --> src/trust_wedo/parsers/site_parser.py:117:21
2026-02-09T09:19:42.6051880Z     |
2026-02-09T09:19:42.6052000Z 115 |                 all_links = soup.find_all("a", href=True)
2026-02-09T09:19:42.6052102Z 116 |                 external_links = []
2026-02-09T09:19:42.6052211Z 117 |                 for l in all_links:
2026-02-09T09:19:42.6052299Z     |                     ^
2026-02-09T09:19:42.6052399Z 118 |                     href = l.get("href")
2026-02-09T09:19:42.6052518Z 119 |                     if isinstance(href, list):
2026-02-09T09:19:42.6052599Z     |
2026-02-09T09:19:42.6052604Z 
2026-02-09T09:19:42.6052696Z E501 Line too long (112 > 100)
2026-02-09T09:19:42.6052831Z    --> src/trust_wedo/parsers/site_parser.py:121:101
2026-02-09T09:19:42.6052912Z     |
2026-02-09T09:19:42.6053021Z 119 |                     if isinstance(href, list):
2026-02-09T09:19:42.6053139Z 120 |                         href = href[0] if href else ""
2026-02-09T09:19:42.6053425Z 121 |                     if href and isinstance(href, str) and href.startswith("http") and self.base_url not in href:
2026-02-09T09:19:42.6053584Z     |                                                                                                     ^^^^^^^^^^^^
2026-02-09T09:19:42.6053711Z 122 |                         external_links.append(href)
2026-02-09T09:19:42.6053801Z     |
2026-02-09T09:19:42.6053807Z 
2026-02-09T09:19:42.6053904Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6054021Z    --> src/trust_wedo/parsers/site_parser.py:123:1
2026-02-09T09:19:42.6054107Z     |
2026-02-09T09:19:42.6054373Z 121 |                     if href and isinstance(href, str) and href.startswith("http") and self.base_url not in href:
2026-02-09T09:19:42.6054494Z 122 |                         external_links.append(href)
2026-02-09T09:19:42.6054592Z 123 |                 
2026-02-09T09:19:42.6054677Z     | ^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6054811Z 124 |                 external_links_count = len(external_links)
2026-02-09T09:19:42.6054896Z     |
2026-02-09T09:19:42.6055011Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6055016Z 
2026-02-09T09:19:42.6055120Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6055238Z    --> src/trust_wedo/parsers/site_parser.py:125:1
2026-02-09T09:19:42.6055462Z     |
2026-02-09T09:19:42.6055598Z 124 |                 external_links_count = len(external_links)
2026-02-09T09:19:42.6055688Z 125 |                 
2026-02-09T09:19:42.6055771Z     | ^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6055878Z 126 |                 # Count social links
2026-02-09T09:19:42.6056156Z 127 |                 social_domains = ["twitter.com", "facebook.com", "linkedin.com", "github.com", "instagram.com"]
2026-02-09T09:19:42.6056236Z     |
2026-02-09T09:19:42.6056433Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6056439Z 
2026-02-09T09:19:42.6056527Z E501 Line too long (111 > 100)
2026-02-09T09:19:42.6056649Z    --> src/trust_wedo/parsers/site_parser.py:127:101
2026-02-09T09:19:42.6056739Z     |
2026-02-09T09:19:42.6056835Z 126 |                 # Count social links
2026-02-09T09:19:42.6057104Z 127 |                 social_domains = ["twitter.com", "facebook.com", "linkedin.com", "github.com", "instagram.com"]
2026-02-09T09:19:42.6057266Z     |                                                                                                     ^^^^^^^^^^^
2026-02-09T09:19:42.6057502Z 128 |                 social_links = [l for l in external_links if any(sd in l for sd in social_domains)]
2026-02-09T09:19:42.6057626Z 129 |                 social_links_count = len(social_links)
2026-02-09T09:19:42.6057708Z     |
2026-02-09T09:19:42.6057719Z 
2026-02-09T09:19:42.6057815Z E741 Ambiguous variable name: `l`
2026-02-09T09:19:42.6057934Z    --> src/trust_wedo/parsers/site_parser.py:128:39
2026-02-09T09:19:42.6058021Z     |
2026-02-09T09:19:42.6058123Z 126 |                 # Count social links
2026-02-09T09:19:42.6058394Z 127 |                 social_domains = ["twitter.com", "facebook.com", "linkedin.com", "github.com", "instagram.com"]
2026-02-09T09:19:42.6058843Z 128 |                 social_links = [l for l in external_links if any(sd in l for sd in social_domains)]
2026-02-09T09:19:42.6058949Z     |                                       ^
2026-02-09T09:19:42.6059087Z 129 |                 social_links_count = len(social_links)
2026-02-09T09:19:42.6059170Z     |
2026-02-09T09:19:42.6059176Z 
2026-02-09T09:19:42.6059286Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6059406Z    --> src/trust_wedo/parsers/site_parser.py:142:1
2026-02-09T09:19:42.6059481Z     |
2026-02-09T09:19:42.6059609Z 140 |                     "social_links_count": social_links_count
2026-02-09T09:19:42.6059697Z 141 |                 }
2026-02-09T09:19:42.6059780Z 142 |             
2026-02-09T09:19:42.6059866Z     | ^^^^^^^^^^^^
2026-02-09T09:19:42.6059962Z 143 |             return {
2026-02-09T09:19:42.6060050Z 144 |                 "url": url,
2026-02-09T09:19:42.6060128Z     |
2026-02-09T09:19:42.6060234Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6060245Z 
2026-02-09T09:19:42.6060366Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6060471Z  --> src/trust_wedo/utils/meta.py:3:1
2026-02-09T09:19:42.6060553Z   |
2026-02-09T09:19:42.6060671Z 1 |   """Metadata utility for Trust WEDO."""
2026-02-09T09:19:42.6060753Z 2 |
2026-02-09T09:19:42.6060858Z 3 | / from datetime import datetime
2026-02-09T09:19:42.6060965Z 4 | | from trust_wedo import __version__
2026-02-09T09:19:42.6061053Z   | |__________________________________^
2026-02-09T09:19:42.6061132Z 5 |
2026-02-09T09:19:42.6061247Z 6 |   def get_meta(input_source: str) -> dict:
2026-02-09T09:19:42.6061331Z   |
2026-02-09T09:19:42.6061423Z help: Organize imports
2026-02-09T09:19:42.6061432Z 
2026-02-09T09:19:42.6061548Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6061692Z  --> src/trust_wedo/validators/schema_validator.py:3:1
2026-02-09T09:19:42.6061770Z   |
2026-02-09T09:19:42.6061926Z 1 |   """Schema 驗證工具模組"""
2026-02-09T09:19:42.6062010Z 2 |
2026-02-09T09:19:42.6062100Z 3 | / import json
2026-02-09T09:19:42.6062200Z 4 | | from pathlib import Path
2026-02-09T09:19:42.6062308Z 5 | | from typing import Dict, List, Tuple
2026-02-09T09:19:42.6062544Z 6 | |
2026-02-09T09:19:42.6062683Z 7 | | from jsonschema import validate, ValidationError
2026-02-09T09:19:42.6062787Z   | |________________________________________________^
2026-02-09T09:19:42.6062874Z   |
2026-02-09T09:19:42.6062967Z help: Organize imports
2026-02-09T09:19:42.6062973Z 
2026-02-09T09:19:42.6063105Z UP035 `typing.Dict` is deprecated, use `dict` instead
2026-02-09T09:19:42.6063237Z  --> src/trust_wedo/validators/schema_validator.py:5:1
2026-02-09T09:19:42.6063323Z   |
2026-02-09T09:19:42.6063403Z 3 | import json
2026-02-09T09:19:42.6063611Z 4 | from pathlib import Path
2026-02-09T09:19:42.6063725Z 5 | from typing import Dict, List, Tuple
2026-02-09T09:19:42.6063814Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6063887Z 6 |
2026-02-09T09:19:42.6064018Z 7 | from jsonschema import validate, ValidationError
2026-02-09T09:19:42.6064108Z   |
2026-02-09T09:19:42.6064113Z 
2026-02-09T09:19:42.6064241Z UP035 `typing.List` is deprecated, use `list` instead
2026-02-09T09:19:42.6064375Z  --> src/trust_wedo/validators/schema_validator.py:5:1
2026-02-09T09:19:42.6064464Z   |
2026-02-09T09:19:42.6064549Z 3 | import json
2026-02-09T09:19:42.6064645Z 4 | from pathlib import Path
2026-02-09T09:19:42.6064753Z 5 | from typing import Dict, List, Tuple
2026-02-09T09:19:42.6064840Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6064921Z 6 |
2026-02-09T09:19:42.6065054Z 7 | from jsonschema import validate, ValidationError
2026-02-09T09:19:42.6065142Z   |
2026-02-09T09:19:42.6065147Z 
2026-02-09T09:19:42.6065290Z UP035 `typing.Tuple` is deprecated, use `tuple` instead
2026-02-09T09:19:42.6065420Z  --> src/trust_wedo/validators/schema_validator.py:5:1
2026-02-09T09:19:42.6065505Z   |
2026-02-09T09:19:42.6065590Z 3 | import json
2026-02-09T09:19:42.6065687Z 4 | from pathlib import Path
2026-02-09T09:19:42.6065790Z 5 | from typing import Dict, List, Tuple
2026-02-09T09:19:42.6065886Z   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-09T09:19:42.6065971Z 6 |
2026-02-09T09:19:42.6066091Z 7 | from jsonschema import validate, ValidationError
2026-02-09T09:19:42.6066182Z   |
2026-02-09T09:19:42.6066187Z 
2026-02-09T09:19:42.6066324Z UP006 [*] Use `dict` instead of `Dict` for type annotation
2026-02-09T09:19:42.6066461Z   --> src/trust_wedo/validators/schema_validator.py:15:23
2026-02-09T09:19:42.6066549Z    |
2026-02-09T09:19:42.6066681Z 13 |     def __init__(self, schema_dir: str = "schemas"):
2026-02-09T09:19:42.6066792Z 14 |         self.schema_dir = Path(schema_dir)
2026-02-09T09:19:42.6066904Z 15 |         self.schemas: Dict[str, dict] = {}
2026-02-09T09:19:42.6067004Z    |                       ^^^^
2026-02-09T09:19:42.6067113Z 16 |         self._load_schemas()
2026-02-09T09:19:42.6067196Z    |
2026-02-09T09:19:42.6067295Z help: Replace with `dict`
2026-02-09T09:19:42.6067302Z 
2026-02-09T09:19:42.6067451Z UP006 [*] Use `tuple` instead of `Tuple` for type annotation
2026-02-09T09:19:42.6067590Z   --> src/trust_wedo/validators/schema_validator.py:36:67
2026-02-09T09:19:42.6067676Z    |
2026-02-09T09:19:42.6067802Z 34 |                     self.schemas[name] = json.load(f)
2026-02-09T09:19:42.6067881Z 35 |
2026-02-09T09:19:42.6068096Z 36 |     def validate_file(self, file_path: Path, schema_name: str) -> Tuple[bool, str]:
2026-02-09T09:19:42.6068213Z    |                                                                   ^^^^^
2026-02-09T09:19:42.6068347Z 37 |         """驗證單一檔案
2026-02-09T09:19:42.6068428Z    |
2026-02-09T09:19:42.6068532Z help: Replace with `tuple`
2026-02-09T09:19:42.6068708Z 
2026-02-09T09:19:42.6068881Z UP006 [*] Use `list` instead of `List` for type annotation
2026-02-09T09:19:42.6069016Z   --> src/trust_wedo/validators/schema_validator.py:65:51
2026-02-09T09:19:42.6069094Z    |
2026-02-09T09:19:42.6069268Z 63 |             return False, f"驗證時發生錯誤: {str(e)}"
2026-02-09T09:19:42.6069349Z 64 |
2026-02-09T09:19:42.6069553Z 65 |     def validate_bundle(self, bundle_dir: str) -> List[Tuple[str, bool, str]]:
2026-02-09T09:19:42.6069662Z    |                                                   ^^^^
2026-02-09T09:19:42.6069946Z 66 |         """驗證整個 bundle 目錄
2026-02-09T09:19:42.6070030Z    |
2026-02-09T09:19:42.6070137Z help: Replace with `list`
2026-02-09T09:19:42.6070145Z 
2026-02-09T09:19:42.6070288Z UP006 [*] Use `tuple` instead of `Tuple` for type annotation
2026-02-09T09:19:42.6070419Z   --> src/trust_wedo/validators/schema_validator.py:65:56
2026-02-09T09:19:42.6070503Z    |
2026-02-09T09:19:42.6070658Z 63 |             return False, f"驗證時發生錯誤: {str(e)}"
2026-02-09T09:19:42.6070738Z 64 |
2026-02-09T09:19:42.6071043Z 65 |     def validate_bundle(self, bundle_dir: str) -> List[Tuple[str, bool, str]]:
2026-02-09T09:19:42.6071156Z    |                                                        ^^^^^
2026-02-09T09:19:42.6071284Z 66 |         """驗證整個 bundle 目錄
2026-02-09T09:19:42.6071363Z    |
2026-02-09T09:19:42.6071467Z help: Replace with `tuple`
2026-02-09T09:19:42.6071473Z 
2026-02-09T09:19:42.6071595Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6071714Z  --> tests/integration/test_capture_flow.py:1:1
2026-02-09T09:19:42.6071812Z   |
2026-02-09T09:19:42.6071897Z 1 | / import os
2026-02-09T09:19:42.6071982Z 2 | | import subprocess
2026-02-09T09:19:42.6072067Z 3 | | import json
2026-02-09T09:19:42.6072172Z 4 | | from pathlib import Path
2026-02-09T09:19:42.6072258Z   | |________________________^
2026-02-09T09:19:42.6072336Z 5 |
2026-02-09T09:19:42.6072445Z 6 |   def test_cli_capture_flow(tmp_path):
2026-02-09T09:19:42.6072535Z   |
2026-02-09T09:19:42.6072629Z help: Organize imports
2026-02-09T09:19:42.6072642Z 
2026-02-09T09:19:42.6072750Z F401 [*] `pathlib.Path` imported but unused
2026-02-09T09:19:42.6072877Z  --> tests/integration/test_capture_flow.py:4:21
2026-02-09T09:19:42.6072958Z   |
2026-02-09T09:19:42.6073058Z 2 | import subprocess
2026-02-09T09:19:42.6073150Z 3 | import json
2026-02-09T09:19:42.6073246Z 4 | from pathlib import Path
2026-02-09T09:19:42.6073331Z   |                     ^^^^
2026-02-09T09:19:42.6073415Z 5 |
2026-02-09T09:19:42.6073525Z 6 | def test_cli_capture_flow(tmp_path):
2026-02-09T09:19:42.6073614Z   |
2026-02-09T09:19:42.6073728Z help: Remove unused import: `pathlib.Path`
2026-02-09T09:19:42.6073733Z 
2026-02-09T09:19:42.6073841Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6073956Z   --> tests/integration/test_capture_flow.py:9:1
2026-02-09T09:19:42.6074037Z    |
2026-02-09T09:19:42.6074143Z  7 |     output_dir = tmp_path / "output"
2026-02-09T09:19:42.6074266Z  8 |     captures_dir = output_dir / "captures"
2026-02-09T09:19:42.6074350Z  9 |     
2026-02-09T09:19:42.6074435Z    | ^^^^
2026-02-09T09:19:42.6074550Z 10 |     # Run tw capture via subprocess
2026-02-09T09:19:42.6074635Z 11 |     cmd = [
2026-02-09T09:19:42.6074716Z    |
2026-02-09T09:19:42.6074824Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6074836Z 
2026-02-09T09:19:42.6074935Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6075054Z   --> tests/integration/test_capture_flow.py:18:1
2026-02-09T09:19:42.6075133Z    |
2026-02-09T09:19:42.6075245Z 16 |         "--output", str(captures_dir)
2026-02-09T09:19:42.6075333Z 17 |     ]
2026-02-09T09:19:42.6075420Z 18 |     
2026-02-09T09:19:42.6075505Z    | ^^^^
2026-02-09T09:19:42.6075603Z 19 |     env = os.environ.copy()
2026-02-09T09:19:42.6075705Z 20 |     env["PYTHONPATH"] = "src"
2026-02-09T09:19:42.6075786Z    |
2026-02-09T09:19:42.6075901Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6075907Z 
2026-02-09T09:19:42.6076007Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6076125Z   --> tests/integration/test_capture_flow.py:21:1
2026-02-09T09:19:42.6076219Z    |
2026-02-09T09:19:42.6076317Z 19 |     env = os.environ.copy()
2026-02-09T09:19:42.6076416Z 20 |     env["PYTHONPATH"] = "src"
2026-02-09T09:19:42.6076504Z 21 |     
2026-02-09T09:19:42.6076588Z    | ^^^^
2026-02-09T09:19:42.6076784Z 22 |     result = subprocess.run(cmd, env=env, capture_output=True, text=True)
2026-02-09T09:19:42.6076869Z    |
2026-02-09T09:19:42.6076986Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6077090Z 
2026-02-09T09:19:42.6077192Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6077316Z   --> tests/integration/test_capture_flow.py:23:1
2026-02-09T09:19:42.6077406Z    |
2026-02-09T09:19:42.6077591Z 22 |     result = subprocess.run(cmd, env=env, capture_output=True, text=True)
2026-02-09T09:19:42.6077679Z 23 |     
2026-02-09T09:19:42.6077762Z    | ^^^^
2026-02-09T09:19:42.6077872Z 24 |     assert result.returncode == 0
2026-02-09T09:19:42.6078036Z 25 |     assert "✅ Schema 驗證成功" in result.stdout
2026-02-09T09:19:42.6078191Z    |
2026-02-09T09:19:42.6078305Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6078310Z 
2026-02-09T09:19:42.6078407Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6078526Z   --> tests/integration/test_capture_flow.py:26:1
2026-02-09T09:19:42.6078842Z    |
2026-02-09T09:19:42.6078955Z 24 |     assert result.returncode == 0
2026-02-09T09:19:42.6079120Z 25 |     assert "✅ Schema 驗證成功" in result.stdout
2026-02-09T09:19:42.6079218Z 26 |     
2026-02-09T09:19:42.6079303Z    | ^^^^
2026-02-09T09:19:42.6079397Z 27 |     # Check if file was created
2026-02-09T09:19:42.6079529Z 28 |     files = list(captures_dir.glob("capture_*.json"))
2026-02-09T09:19:42.6079620Z    |
2026-02-09T09:19:42.6079726Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6079731Z 
2026-02-09T09:19:42.6079830Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6079949Z   --> tests/integration/test_capture_flow.py:30:1
2026-02-09T09:19:42.6080034Z    |
2026-02-09T09:19:42.6080173Z 28 |     files = list(captures_dir.glob("capture_*.json"))
2026-02-09T09:19:42.6080269Z 29 |     assert len(files) == 1
2026-02-09T09:19:42.6080352Z 30 |     
2026-02-09T09:19:42.6080430Z    | ^^^^
2026-02-09T09:19:42.6080525Z 31 |     with open(files[0]) as f:
2026-02-09T09:19:42.6080621Z 32 |         data = json.load(f)
2026-02-09T09:19:42.6080701Z    |
2026-02-09T09:19:42.6080805Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6080810Z 
2026-02-09T09:19:42.6080936Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6081054Z  --> tests/integration/test_diff_flow.py:1:1
2026-02-09T09:19:42.6081137Z   |
2026-02-09T09:19:42.6081215Z 1 | / import os
2026-02-09T09:19:42.6081310Z 2 | | import subprocess
2026-02-09T09:19:42.6081394Z 3 | | import json
2026-02-09T09:19:42.6081492Z 4 | | from pathlib import Path
2026-02-09T09:19:42.6081578Z   | |________________________^
2026-02-09T09:19:42.6081662Z 5 |
2026-02-09T09:19:42.6081767Z 6 |   def test_cli_diff_flow(tmp_path):
2026-02-09T09:19:42.6081852Z   |
2026-02-09T09:19:42.6081950Z help: Organize imports
2026-02-09T09:19:42.6081956Z 
2026-02-09T09:19:42.6082059Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6082180Z   --> tests/integration/test_diff_flow.py:13:1
2026-02-09T09:19:42.6082273Z    |
2026-02-09T09:19:42.6082368Z 11 |     output_dir.mkdir()
2026-02-09T09:19:42.6082468Z 12 |     captures_dir.mkdir()
2026-02-09T09:19:42.6082556Z 13 |     
2026-02-09T09:19:42.6082787Z    | ^^^^
2026-02-09T09:19:42.6082888Z 14 |     afb_id = "afb:test-diff-flow"
2026-02-09T09:19:42.6082967Z    |
2026-02-09T09:19:42.6083081Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6083087Z 
2026-02-09T09:19:42.6083186Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6083301Z   --> tests/integration/test_diff_flow.py:15:1
2026-02-09T09:19:42.6083378Z    |
2026-02-09T09:19:42.6083484Z 14 |     afb_id = "afb:test-diff-flow"
2026-02-09T09:19:42.6083565Z 15 |     
2026-02-09T09:19:42.6083645Z    | ^^^^
2026-02-09T09:19:42.6083792Z 16 |     # 1. Create a dummy AFB file (required by tw diff)
2026-02-09T09:19:42.6083965Z 17 |     # The tw diff currently looks at output/afb.json by default in MVP
2026-02-09T09:19:42.6084043Z    |
2026-02-09T09:19:42.6084150Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6084163Z 
2026-02-09T09:19:42.6084255Z W291 [*] Trailing whitespace
2026-02-09T09:19:42.6084374Z   --> tests/integration/test_diff_flow.py:22:41
2026-02-09T09:19:42.6084460Z    |
2026-02-09T09:19:42.6084576Z 20 |     # but the user spec didn't mention it.
2026-02-09T09:19:42.6084775Z 21 |     # I'll create it in the actual output/ directory of the project for this test
2026-02-09T09:19:42.6084890Z 22 |     # but that might affect other tests. 
2026-02-09T09:19:42.6084983Z    |                                         ^
2026-02-09T09:19:42.6085214Z 23 |     # Better: I'll use the actual output/afb.json if it exists, or create one.
2026-02-09T09:19:42.6085300Z    |
2026-02-09T09:19:42.6085528Z help: Remove trailing whitespace
2026-02-09T09:19:42.6085534Z 
2026-02-09T09:19:42.6085644Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6085759Z   --> tests/integration/test_diff_flow.py:24:1
2026-02-09T09:19:42.6085831Z    |
2026-02-09T09:19:42.6085941Z 22 |     # but that might affect other tests. 
2026-02-09T09:19:42.6086124Z 23 |     # Better: I'll use the actual output/afb.json if it exists, or create one.
2026-02-09T09:19:42.6086202Z 24 |     
2026-02-09T09:19:42.6086287Z    | ^^^^
2026-02-09T09:19:42.6086425Z 25 |     actual_output_afb = Path("output/afb.json")
2026-02-09T09:19:42.6086527Z 26 |     original_afb_content = None
2026-02-09T09:19:42.6086609Z    |
2026-02-09T09:19:42.6086723Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6086729Z 
2026-02-09T09:19:42.6086830Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6086941Z   --> tests/integration/test_diff_flow.py:29:1
2026-02-09T09:19:42.6087030Z    |
2026-02-09T09:19:42.6087135Z 27 |     if actual_output_afb.exists():
2026-02-09T09:19:42.6087287Z 28 |         original_afb_content = actual_output_afb.read_text()
2026-02-09T09:19:42.6087370Z 29 |     
2026-02-09T09:19:42.6087460Z    | ^^^^
2026-02-09T09:19:42.6087625Z 30 |     actual_output_afb.parent.mkdir(parents=True, exist_ok=True)
2026-02-09T09:19:42.6087715Z 31 |     afb_data = {
2026-02-09T09:19:42.6087801Z    |
2026-02-09T09:19:42.6087903Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6087908Z 
2026-02-09T09:19:42.6088016Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6088125Z   --> tests/integration/test_diff_flow.py:36:1
2026-02-09T09:19:42.6088204Z    |
2026-02-09T09:19:42.6088283Z 34 |     }
2026-02-09T09:19:42.6088419Z 35 |     actual_output_afb.write_text(json.dumps(afb_data))
2026-02-09T09:19:42.6088505Z 36 |     
2026-02-09T09:19:42.6088739Z    | ^^^^
2026-02-09T09:19:42.6088833Z 37 |     try:
2026-02-09T09:19:42.6088936Z 38 |         # 2. Capture something
2026-02-09T09:19:42.6089014Z    |
2026-02-09T09:19:42.6089125Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6089130Z 
2026-02-09T09:19:42.6089227Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6089350Z   --> tests/integration/test_diff_flow.py:41:1
2026-02-09T09:19:42.6089432Z    |
2026-02-09T09:19:42.6089530Z 39 |         env = os.environ.copy()
2026-02-09T09:19:42.6089634Z 40 |         env["PYTHONPATH"] = "src"
2026-02-09T09:19:42.6089717Z 41 |         
2026-02-09T09:19:42.6089797Z    | ^^^^^^^^
2026-02-09T09:19:42.6090027Z 42 |         subprocess.run([
2026-02-09T09:19:42.6090167Z 43 |             "python3", "-m", "trust_wedo.cli", "capture",
2026-02-09T09:19:42.6090249Z    |
2026-02-09T09:19:42.6090351Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6090357Z 
2026-02-09T09:19:42.6090460Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6090571Z   --> tests/integration/test_diff_flow.py:49:1
2026-02-09T09:19:42.6090651Z    |
2026-02-09T09:19:42.6090757Z 47 |             "--output", str(captures_dir)
2026-02-09T09:19:42.6090859Z 48 |         ], env=env, check=True)
2026-02-09T09:19:42.6090936Z 49 |         
2026-02-09T09:19:42.6091016Z    | ^^^^^^^^
2026-02-09T09:19:42.6091110Z 50 |         # 3. Run diff
2026-02-09T09:19:42.6091193Z 51 |         cmd = [
2026-02-09T09:19:42.6091274Z    |
2026-02-09T09:19:42.6091380Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6091386Z 
2026-02-09T09:19:42.6091486Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6091596Z   --> tests/integration/test_diff_flow.py:57:1
2026-02-09T09:19:42.6091679Z    |
2026-02-09T09:19:42.6091783Z 55 |             "--output", str(diffs_dir)
2026-02-09T09:19:42.6091861Z 56 |         ]
2026-02-09T09:19:42.6091942Z 57 |         
2026-02-09T09:19:42.6092030Z    | ^^^^^^^^
2026-02-09T09:19:42.6092223Z 58 |         result = subprocess.run(cmd, env=env, capture_output=True, text=True)
2026-02-09T09:19:42.6092301Z    |
2026-02-09T09:19:42.6092404Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6092415Z 
2026-02-09T09:19:42.6092675Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6092788Z   --> tests/integration/test_diff_flow.py:59:1
2026-02-09T09:19:42.6092867Z    |
2026-02-09T09:19:42.6093063Z 58 |         result = subprocess.run(cmd, env=env, capture_output=True, text=True)
2026-02-09T09:19:42.6093147Z 59 |         
2026-02-09T09:19:42.6093229Z    | ^^^^^^^^
2026-02-09T09:19:42.6093341Z 60 |         assert result.returncode == 0
2026-02-09T09:19:42.6093516Z 61 |         assert "✅ Schema 驗證成功" in result.stdout
2026-02-09T09:19:42.6093608Z    |
2026-02-09T09:19:42.6093713Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6093727Z 
2026-02-09T09:19:42.6093825Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6093936Z   --> tests/integration/test_diff_flow.py:63:1
2026-02-09T09:19:42.6094011Z    |
2026-02-09T09:19:42.6094172Z 61 |         assert "✅ Schema 驗證成功" in result.stdout
2026-02-09T09:19:42.6094353Z 62 |         assert "找到 1 個相關 Capture" in result.stdout
2026-02-09T09:19:42.6094436Z 63 |         
2026-02-09T09:19:42.6094532Z    | ^^^^^^^^
2026-02-09T09:19:42.6094622Z 64 |         # Check output
2026-02-09T09:19:42.6094755Z 65 |         diff_files = list(diffs_dir.glob("diff_*.json"))
2026-02-09T09:19:42.6094834Z    |
2026-02-09T09:19:42.6094943Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6094949Z 
2026-02-09T09:19:42.6095046Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6095159Z   --> tests/integration/test_diff_flow.py:67:1
2026-02-09T09:19:42.6095256Z    |
2026-02-09T09:19:42.6095384Z 65 |         diff_files = list(diffs_dir.glob("diff_*.json"))
2026-02-09T09:19:42.6095489Z 66 |         assert len(diff_files) == 1
2026-02-09T09:19:42.6095584Z 67 |         
2026-02-09T09:19:42.6095664Z    | ^^^^^^^^
2026-02-09T09:19:42.6095761Z 68 |         with open(diff_files[0]) as f:
2026-02-09T09:19:42.6095848Z 69 |             data = json.load(f)
2026-02-09T09:19:42.6095927Z    |
2026-02-09T09:19:42.6096032Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6096043Z 
2026-02-09T09:19:42.6096143Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6096263Z   --> tests/integration/test_diff_flow.py:73:1
2026-02-09T09:19:42.6096350Z    |
2026-02-09T09:19:42.6096477Z 71 |             assert data["summary"]["total_captures"] == 1
2026-02-09T09:19:42.6096636Z 72 |             assert data["comparisons"][0]["similarity_score"] == 1.0
2026-02-09T09:19:42.6096724Z 73 |             
2026-02-09T09:19:42.6096805Z    | ^^^^^^^^^^^^
2026-02-09T09:19:42.6097001Z 74 |     finally:
2026-02-09T09:19:42.6097111Z 75 |         # Restore original AFB if any
2026-02-09T09:19:42.6097191Z    |
2026-02-09T09:19:42.6097294Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6097300Z 
2026-02-09T09:19:42.6097428Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6097533Z  --> tests/integration/test_gates.py:1:1
2026-02-09T09:19:42.6097614Z   |
2026-02-09T09:19:42.6097699Z 1 | / import json
2026-02-09T09:19:42.6097798Z 2 | | import pytest
2026-02-09T09:19:42.6097900Z 3 | | from pathlib import Path
2026-02-09T09:19:42.6098035Z 4 | | from trust_wedo.core.afb_builder import AFBBuilder
2026-02-09T09:19:42.6098148Z   | |__________________________________________________^
2026-02-09T09:19:42.6098226Z 5 |
2026-02-09T09:19:42.6098325Z 6 |   def test_afb_gate_fail_behavior():
2026-02-09T09:19:42.6098408Z   |
2026-02-09T09:19:42.6098506Z help: Organize imports
2026-02-09T09:19:42.6098512Z 
2026-02-09T09:19:42.6098712Z F401 [*] `json` imported but unused
2026-02-09T09:19:42.6098823Z  --> tests/integration/test_gates.py:1:8
2026-02-09T09:19:42.6098906Z   |
2026-02-09T09:19:42.6098990Z 1 | import json
2026-02-09T09:19:42.6099075Z   |        ^^^^
2026-02-09T09:19:42.6099161Z 2 | import pytest
2026-02-09T09:19:42.6099256Z 3 | from pathlib import Path
2026-02-09T09:19:42.6099336Z   |
2026-02-09T09:19:42.6099438Z help: Remove unused import: `json`
2026-02-09T09:19:42.6099444Z 
2026-02-09T09:19:42.6099553Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6099653Z  --> tests/integration/test_gates.py:2:8
2026-02-09T09:19:42.6099855Z   |
2026-02-09T09:19:42.6099952Z 1 | import json
2026-02-09T09:19:42.6100039Z 2 | import pytest
2026-02-09T09:19:42.6100122Z   |        ^^^^^^
2026-02-09T09:19:42.6100220Z 3 | from pathlib import Path
2026-02-09T09:19:42.6100362Z 4 | from trust_wedo.core.afb_builder import AFBBuilder
2026-02-09T09:19:42.6100447Z   |
2026-02-09T09:19:42.6100548Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6100554Z 
2026-02-09T09:19:42.6100672Z F401 [*] `pathlib.Path` imported but unused
2026-02-09T09:19:42.6100778Z  --> tests/integration/test_gates.py:3:21
2026-02-09T09:19:42.6100860Z   |
2026-02-09T09:19:42.6100945Z 1 | import json
2026-02-09T09:19:42.6101039Z 2 | import pytest
2026-02-09T09:19:42.6101132Z 3 | from pathlib import Path
2026-02-09T09:19:42.6101216Z   |                     ^^^^
2026-02-09T09:19:42.6101353Z 4 | from trust_wedo.core.afb_builder import AFBBuilder
2026-02-09T09:19:42.6101436Z   |
2026-02-09T09:19:42.6101551Z help: Remove unused import: `pathlib.Path`
2026-02-09T09:19:42.6101563Z 
2026-02-09T09:19:42.6101672Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6101774Z   --> tests/integration/test_gates.py:17:1
2026-02-09T09:19:42.6101855Z    |
2026-02-09T09:19:42.6101937Z 15 |     }
2026-02-09T09:19:42.6102135Z 16 |     html_content = "<html><body><article>Test content</article></body></html>"
2026-02-09T09:19:42.6102218Z 17 |     
2026-02-09T09:19:42.6102299Z    | ^^^^
2026-02-09T09:19:42.6102450Z 18 |     builder = AFBBuilder(html_content, entity_profile)
2026-02-09T09:19:42.6102585Z 19 |     result = builder.build(input_source="test.html")
2026-02-09T09:19:42.6102669Z    |
2026-02-09T09:19:42.6102781Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6102793Z 
2026-02-09T09:19:42.6102896Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6103006Z   --> tests/integration/test_gates.py:20:1
2026-02-09T09:19:42.6103079Z    |
2026-02-09T09:19:42.6103227Z 18 |     builder = AFBBuilder(html_content, entity_profile)
2026-02-09T09:19:42.6103363Z 19 |     result = builder.build(input_source="test.html")
2026-02-09T09:19:42.6103439Z 20 |     
2026-02-09T09:19:42.6103524Z    | ^^^^
2026-02-09T09:19:42.6103638Z 21 |     # Assertions for Unified Gate Behavior
2026-02-09T09:19:42.6103748Z 22 |     assert result["eligibility"] == "fail"
2026-02-09T09:19:42.6103829Z    |
2026-02-09T09:19:42.6103942Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6103947Z 
2026-02-09T09:19:42.6104173Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6104276Z   --> tests/integration/test_gates.py:40:1
2026-02-09T09:19:42.6104365Z    |
2026-02-09T09:19:42.6104447Z 38 |     }
2026-02-09T09:19:42.6104708Z 39 |     html_content = "<html><body><article>Excellent high quality content.</article></body></html>"
2026-02-09T09:19:42.6104800Z 40 |     
2026-02-09T09:19:42.6104882Z    | ^^^^
2026-02-09T09:19:42.6105016Z 41 |     builder = AFBBuilder(html_content, entity_profile)
2026-02-09T09:19:42.6105145Z 42 |     result = builder.build(input_source="test.html")
2026-02-09T09:19:42.6105234Z    |
2026-02-09T09:19:42.6105336Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6105342Z 
2026-02-09T09:19:42.6105438Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6105546Z   --> tests/integration/test_gates.py:43:1
2026-02-09T09:19:42.6105628Z    |
2026-02-09T09:19:42.6105756Z 41 |     builder = AFBBuilder(html_content, entity_profile)
2026-02-09T09:19:42.6105886Z 42 |     result = builder.build(input_source="test.html")
2026-02-09T09:19:42.6105980Z 43 |     
2026-02-09T09:19:42.6106056Z    | ^^^^
2026-02-09T09:19:42.6106165Z 44 |     assert result["eligibility"] == "pass"
2026-02-09T09:19:42.6106336Z 45 |     assert "reasons" not in result or len(result["reasons"]) == 0
2026-02-09T09:19:42.6106415Z    |
2026-02-09T09:19:42.6106519Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6106525Z 
2026-02-09T09:19:42.6106656Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6106839Z  --> tests/unit/test_capture.py:1:1
2026-02-09T09:19:42.6106923Z   |
2026-02-09T09:19:42.6107012Z 1 | / import json
2026-02-09T09:19:42.6107110Z 2 | | import pytest
2026-02-09T09:19:42.6107272Z 3 | | from trust_wedo.core.capture_manager import CaptureManager
2026-02-09T09:19:42.6107397Z   | |__________________________________________________________^
2026-02-09T09:19:42.6107485Z 4 |
2026-02-09T09:19:42.6107592Z 5 |   def test_capture_output(tmp_path):
2026-02-09T09:19:42.6107674Z   |
2026-02-09T09:19:42.6107766Z help: Organize imports
2026-02-09T09:19:42.6107780Z 
2026-02-09T09:19:42.6107882Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6107985Z  --> tests/unit/test_capture.py:2:8
2026-02-09T09:19:42.6108067Z   |
2026-02-09T09:19:42.6108160Z 1 | import json
2026-02-09T09:19:42.6108241Z 2 | import pytest
2026-02-09T09:19:42.6108321Z   |        ^^^^^^
2026-02-09T09:19:42.6108490Z 3 | from trust_wedo.core.capture_manager import CaptureManager
2026-02-09T09:19:42.6108726Z   |
2026-02-09T09:19:42.6108842Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6108848Z 
2026-02-09T09:19:42.6108950Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6109059Z   --> tests/unit/test_capture.py:8:1
2026-02-09T09:19:42.6109142Z    |
2026-02-09T09:19:42.6109246Z  6 |     output_dir = tmp_path / "captures"
2026-02-09T09:19:42.6109395Z  7 |     manager = CaptureManager(output_dir=str(output_dir))
2026-02-09T09:19:42.6109473Z  8 |     
2026-02-09T09:19:42.6109552Z    | ^^^^
2026-02-09T09:19:42.6109655Z  9 |     afb_id = "afb:test-capture"
2026-02-09T09:19:42.6109786Z 10 |     ai_output = "This is a captured AI response."
2026-02-09T09:19:42.6109866Z    |
2026-02-09T09:19:42.6109968Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6109974Z 
2026-02-09T09:19:42.6110078Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6110179Z   --> tests/unit/test_capture.py:12:1
2026-02-09T09:19:42.6110261Z    |
2026-02-09T09:19:42.6110389Z 10 |     ai_output = "This is a captured AI response."
2026-02-09T09:19:42.6110482Z 11 |     source = "test-ai"
2026-02-09T09:19:42.6110559Z 12 |     
2026-02-09T09:19:42.6110643Z    | ^^^^
2026-02-09T09:19:42.6110786Z 13 |     result = manager.capture(afb_id, ai_output, source)
2026-02-09T09:19:42.6110867Z    |
2026-02-09T09:19:42.6110974Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6110980Z 
2026-02-09T09:19:42.6111087Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6111184Z   --> tests/unit/test_capture.py:14:1
2026-02-09T09:19:42.6111397Z    |
2026-02-09T09:19:42.6111533Z 13 |     result = manager.capture(afb_id, ai_output, source)
2026-02-09T09:19:42.6111607Z 14 |     
2026-02-09T09:19:42.6111686Z    | ^^^^
2026-02-09T09:19:42.6111788Z 15 |     assert result["afb_id"] == afb_id
2026-02-09T09:19:42.6111902Z 16 |     assert result["ai_output"] == ai_output
2026-02-09T09:19:42.6111985Z    |
2026-02-09T09:19:42.6112087Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6112093Z 
2026-02-09T09:19:42.6112202Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6112307Z   --> tests/unit/test_capture.py:20:1
2026-02-09T09:19:42.6112391Z    |
2026-02-09T09:19:42.6112501Z 18 |     assert result["capture_id"] == "cap:001"
2026-02-09T09:19:42.6112605Z 19 |     assert "meta" in result
2026-02-09T09:19:42.6112689Z 20 |     
2026-02-09T09:19:42.6112768Z    | ^^^^
2026-02-09T09:19:42.6112865Z 21 |     # Verify file exists
2026-02-09T09:19:42.6112993Z 22 |     files = list(output_dir.glob("capture_*.json"))
2026-02-09T09:19:42.6113082Z    |
2026-02-09T09:19:42.6113185Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6113196Z 
2026-02-09T09:19:42.6113296Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6113401Z   --> tests/unit/test_capture.py:24:1
2026-02-09T09:19:42.6113477Z    |
2026-02-09T09:19:42.6113604Z 22 |     files = list(output_dir.glob("capture_*.json"))
2026-02-09T09:19:42.6113698Z 23 |     assert len(files) == 1
2026-02-09T09:19:42.6113779Z 24 |     
2026-02-09T09:19:42.6113864Z    | ^^^^
2026-02-09T09:19:42.6114075Z 25 |     with open(files[0]) as f:
2026-02-09T09:19:42.6114169Z 26 |         data = json.load(f)
2026-02-09T09:19:42.6114252Z    |
2026-02-09T09:19:42.6114363Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6114368Z 
2026-02-09T09:19:42.6114469Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6114569Z   --> tests/unit/test_capture.py:33:1
2026-02-09T09:19:42.6114650Z    |
2026-02-09T09:19:42.6114749Z 31 |     output_dir = tmp_path / "captures"
2026-02-09T09:19:42.6114896Z 32 |     manager = CaptureManager(output_dir=str(output_dir))
2026-02-09T09:19:42.6114985Z 33 |     
2026-02-09T09:19:42.6115066Z    | ^^^^
2026-02-09T09:19:42.6115174Z 34 |     manager.capture("afb:1", "output 1")
2026-02-09T09:19:42.6115301Z 35 |     result2 = manager.capture("afb:2", "output 2")
2026-02-09T09:19:42.6115388Z    |
2026-02-09T09:19:42.6115492Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6115496Z 
2026-02-09T09:19:42.6115598Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6115714Z   --> tests/unit/test_capture.py:36:1
2026-02-09T09:19:42.6115797Z    |
2026-02-09T09:19:42.6115904Z 34 |     manager.capture("afb:1", "output 1")
2026-02-09T09:19:42.6116027Z 35 |     result2 = manager.capture("afb:2", "output 2")
2026-02-09T09:19:42.6116120Z 36 |     
2026-02-09T09:19:42.6116200Z    | ^^^^
2026-02-09T09:19:42.6116312Z 37 |     assert result2["capture_id"] == "cap:002"
2026-02-09T09:19:42.6116397Z    |
2026-02-09T09:19:42.6116501Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6116509Z 
2026-02-09T09:19:42.6116628Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6116735Z  --> tests/unit/test_ccs.py:1:1
2026-02-09T09:19:42.6116812Z   |
2026-02-09T09:19:42.6116900Z 1 | / import pytest
2026-02-09T09:19:42.6117085Z 2 | | from trust_wedo.core.citation_evaluator import CitationEvaluator
2026-02-09T09:19:42.6117228Z   | |________________________________________________________________^
2026-02-09T09:19:42.6117311Z 3 |
2026-02-09T09:19:42.6117425Z 4 |   def test_evaluate_citations_accept():
2026-02-09T09:19:42.6117512Z   |
2026-02-09T09:19:42.6117604Z help: Organize imports
2026-02-09T09:19:42.6117611Z 
2026-02-09T09:19:42.6117707Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6117806Z  --> tests/unit/test_ccs.py:1:8
2026-02-09T09:19:42.6117893Z   |
2026-02-09T09:19:42.6117980Z 1 | import pytest
2026-02-09T09:19:42.6118060Z   |        ^^^^^^
2026-02-09T09:19:42.6118237Z 2 | from trust_wedo.core.citation_evaluator import CitationEvaluator
2026-02-09T09:19:42.6118414Z   |
2026-02-09T09:19:42.6118513Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6118518Z 
2026-02-09T09:19:42.6118726Z E501 Line too long (110 > 100)
2026-02-09T09:19:42.6118826Z   --> tests/unit/test_ccs.py:15:101
2026-02-09T09:19:42.6118908Z    |
2026-02-09T09:19:42.6119020Z 13 | def test_evaluate_citations_reject():
2026-02-09T09:19:42.6119115Z 14 |     citations = [
2026-02-09T09:19:42.6119416Z 15 |         {"citation_id": "cite:002", "url": "https://twitter.com/bad", "status": "unverified", "days_old": 500}
2026-02-09T09:19:42.6119580Z    |                                                                                                     ^^^^^^^^^^
2026-02-09T09:19:42.6119669Z 16 |     ]
2026-02-09T09:19:42.6119813Z 17 |     evaluator = CitationEvaluator("afb:test", citations)
2026-02-09T09:19:42.6119893Z    |
2026-02-09T09:19:42.6119898Z 
2026-02-09T09:19:42.6120022Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6120127Z  --> tests/unit/test_diff.py:1:1
2026-02-09T09:19:42.6120207Z   |
2026-02-09T09:19:42.6120295Z 1 | / import pytest
2026-02-09T09:19:42.6120444Z 2 | | from trust_wedo.core.diff_analyzer import DiffAnalyzer
2026-02-09T09:19:42.6120555Z   | |______________________________________________________^
2026-02-09T09:19:42.6120638Z 3 |
2026-02-09T09:19:42.6120741Z 4 |   def test_diff_analysis():
2026-02-09T09:19:42.6120819Z   |
2026-02-09T09:19:42.6120909Z help: Organize imports
2026-02-09T09:19:42.6120915Z 
2026-02-09T09:19:42.6121230Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6121328Z  --> tests/unit/test_diff.py:1:8
2026-02-09T09:19:42.6121412Z   |
2026-02-09T09:19:42.6121500Z 1 | import pytest
2026-02-09T09:19:42.6121585Z   |        ^^^^^^
2026-02-09T09:19:42.6121728Z 2 | from trust_wedo.core.diff_analyzer import DiffAnalyzer
2026-02-09T09:19:42.6121808Z   |
2026-02-09T09:19:42.6121916Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6121922Z 
2026-02-09T09:19:42.6122022Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6122126Z   --> tests/unit/test_diff.py:21:1
2026-02-09T09:19:42.6122214Z    |
2026-02-09T09:19:42.6122297Z 19 |         }
2026-02-09T09:19:42.6122380Z 20 |     ]
2026-02-09T09:19:42.6122461Z 21 |     
2026-02-09T09:19:42.6122554Z    | ^^^^
2026-02-09T09:19:42.6122679Z 22 |     analyzer = DiffAnalyzer(afb_data, captures)
2026-02-09T09:19:42.6122781Z 23 |     result = analyzer.analyze()
2026-02-09T09:19:42.6122860Z    |
2026-02-09T09:19:42.6122967Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6122977Z 
2026-02-09T09:19:42.6123078Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6123175Z   --> tests/unit/test_diff.py:24:1
2026-02-09T09:19:42.6123263Z    |
2026-02-09T09:19:42.6123380Z 22 |     analyzer = DiffAnalyzer(afb_data, captures)
2026-02-09T09:19:42.6123474Z 23 |     result = analyzer.analyze()
2026-02-09T09:19:42.6123560Z 24 |     
2026-02-09T09:19:42.6123641Z    | ^^^^
2026-02-09T09:19:42.6123747Z 25 |     assert result["afb_id"] == "afb:test"
2026-02-09T09:19:42.6123864Z 26 |     assert len(result["comparisons"]) == 2
2026-02-09T09:19:42.6123952Z    |
2026-02-09T09:19:42.6124057Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6124063Z 
2026-02-09T09:19:42.6124177Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6124282Z  --> tests/unit/test_ec.py:1:1
2026-02-09T09:19:42.6124361Z   |
2026-02-09T09:19:42.6124447Z 1 | / import pytest
2026-02-09T09:19:42.6124590Z 2 | | from trust_wedo.core.entity_scorer import EntityScorer
2026-02-09T09:19:42.6124708Z   | |______________________________________________________^
2026-02-09T09:19:42.6124788Z 3 |
2026-02-09T09:19:42.6124893Z 4 |   def test_calculate_ec_perfect():
2026-02-09T09:19:42.6124982Z   |
2026-02-09T09:19:42.6125079Z help: Organize imports
2026-02-09T09:19:42.6125085Z 
2026-02-09T09:19:42.6125183Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6125285Z  --> tests/unit/test_ec.py:1:8
2026-02-09T09:19:42.6125356Z   |
2026-02-09T09:19:42.6125568Z 1 | import pytest
2026-02-09T09:19:42.6125650Z   |        ^^^^^^
2026-02-09T09:19:42.6125805Z 2 | from trust_wedo.core.entity_scorer import EntityScorer
2026-02-09T09:19:42.6125887Z   |
2026-02-09T09:19:42.6125993Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6125999Z 
2026-02-09T09:19:42.6126124Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6126221Z  --> tests/unit/test_graph.py:1:1
2026-02-09T09:19:42.6126303Z   |
2026-02-09T09:19:42.6126385Z 1 | / import pytest
2026-02-09T09:19:42.6126538Z 2 | | from trust_wedo.core.graph_builder import GraphBuilder
2026-02-09T09:19:42.6126651Z   | |______________________________________________________^
2026-02-09T09:19:42.6126732Z 3 |
2026-02-09T09:19:42.6126840Z 4 |   def test_graph_metrics_isolated():
2026-02-09T09:19:42.6126918Z   |
2026-02-09T09:19:42.6127008Z help: Organize imports
2026-02-09T09:19:42.6127014Z 
2026-02-09T09:19:42.6127110Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6127205Z  --> tests/unit/test_graph.py:1:8
2026-02-09T09:19:42.6127287Z   |
2026-02-09T09:19:42.6127381Z 1 | import pytest
2026-02-09T09:19:42.6127471Z   |        ^^^^^^
2026-02-09T09:19:42.6127611Z 2 | from trust_wedo.core.graph_builder import GraphBuilder
2026-02-09T09:19:42.6127692Z   |
2026-02-09T09:19:42.6127801Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6127806Z 
2026-02-09T09:19:42.6127921Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6128020Z  --> tests/unit/test_report.py:1:1
2026-02-09T09:19:42.6128180Z   |
2026-02-09T09:19:42.6128273Z 1 | / import json
2026-02-09T09:19:42.6128365Z 2 | | import pytest
2026-02-09T09:19:42.6128463Z 3 | | from pathlib import Path
2026-02-09T09:19:42.6128734Z 4 | | from trust_wedo.core.report_generator import ReportGenerator
2026-02-09T09:19:42.6128868Z   | |____________________________________________________________^
2026-02-09T09:19:42.6128947Z 5 |
2026-02-09T09:19:42.6129061Z 6 |   def test_report_generation(tmp_path):
2026-02-09T09:19:42.6129143Z   |
2026-02-09T09:19:42.6129237Z help: Organize imports
2026-02-09T09:19:42.6129242Z 
2026-02-09T09:19:42.6129340Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6129447Z  --> tests/unit/test_report.py:2:8
2026-02-09T09:19:42.6129525Z   |
2026-02-09T09:19:42.6129612Z 1 | import json
2026-02-09T09:19:42.6129703Z 2 | import pytest
2026-02-09T09:19:42.6129786Z   |        ^^^^^^
2026-02-09T09:19:42.6129876Z 3 | from pathlib import Path
2026-02-09T09:19:42.6130034Z 4 | from trust_wedo.core.report_generator import ReportGenerator
2026-02-09T09:19:42.6130122Z   |
2026-02-09T09:19:42.6130220Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6130226Z 
2026-02-09T09:19:42.6130335Z F401 [*] `pathlib.Path` imported but unused
2026-02-09T09:19:42.6130445Z  --> tests/unit/test_report.py:3:21
2026-02-09T09:19:42.6130528Z   |
2026-02-09T09:19:42.6130607Z 1 | import json
2026-02-09T09:19:42.6130699Z 2 | import pytest
2026-02-09T09:19:42.6130797Z 3 | from pathlib import Path
2026-02-09T09:19:42.6130879Z   |                     ^^^^
2026-02-09T09:19:42.6131042Z 4 | from trust_wedo.core.report_generator import ReportGenerator
2026-02-09T09:19:42.6131128Z   |
2026-02-09T09:19:42.6131240Z help: Remove unused import: `pathlib.Path`
2026-02-09T09:19:42.6131245Z 
2026-02-09T09:19:42.6131344Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6131449Z   --> tests/unit/test_report.py:10:1
2026-02-09T09:19:42.6131527Z    |
2026-02-09T09:19:42.6131631Z  8 |     bundle_dir = tmp_path / "bundle"
2026-02-09T09:19:42.6131726Z  9 |     bundle_dir.mkdir()
2026-02-09T09:19:42.6131818Z 10 |     
2026-02-09T09:19:42.6131893Z    | ^^^^
2026-02-09T09:19:42.6132125Z 11 |     entity_data = {"entity_id": "ent:test", "entity_confidence": 0.8, "eligibility": "pass"}
2026-02-09T09:19:42.6132344Z 12 |     citation_data = {"decision": "accept", "citations": [{"citation_id": "cite:001"}]}
2026-02-09T09:19:42.6132425Z    |
2026-02-09T09:19:42.6132535Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6132541Z 
2026-02-09T09:19:42.6132774Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6132874Z   --> tests/unit/test_report.py:14:1
2026-02-09T09:19:42.6132954Z    |
2026-02-09T09:19:42.6133161Z 12 |     citation_data = {"decision": "accept", "citations": [{"citation_id": "cite:001"}]}
2026-02-09T09:19:42.6133362Z 13 |     graph_data = {"metrics": {"single_source_risk": False, "distinct_sources": 2}}
2026-02-09T09:19:42.6133441Z 14 |     
2026-02-09T09:19:42.6133521Z    | ^^^^
2026-02-09T09:19:42.6133717Z 15 |     (bundle_dir / "entity_profile.json").write_text(json.dumps(entity_data))
2026-02-09T09:19:42.6133912Z 16 |     (bundle_dir / "citation_eval.json").write_text(json.dumps(citation_data))
2026-02-09T09:19:42.6133993Z    |
2026-02-09T09:19:42.6134103Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6134109Z 
2026-02-09T09:19:42.6134212Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6134312Z   --> tests/unit/test_report.py:18:1
2026-02-09T09:19:42.6134395Z    |
2026-02-09T09:19:42.6134596Z 16 |     (bundle_dir / "citation_eval.json").write_text(json.dumps(citation_data))
2026-02-09T09:19:42.6134776Z 17 |     (bundle_dir / "entity_graph.json").write_text(json.dumps(graph_data))
2026-02-09T09:19:42.6134855Z 18 |     
2026-02-09T09:19:42.6134943Z    | ^^^^
2026-02-09T09:19:42.6135071Z 19 |     generator = ReportGenerator(str(bundle_dir))
2026-02-09T09:19:42.6135150Z    |
2026-02-09T09:19:42.6135260Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6135265Z 
2026-02-09T09:19:42.6135363Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6135573Z   --> tests/unit/test_report.py:20:1
2026-02-09T09:19:42.6135654Z    |
2026-02-09T09:19:42.6135784Z 19 |     generator = ReportGenerator(str(bundle_dir))
2026-02-09T09:19:42.6135866Z 20 |     
2026-02-09T09:19:42.6135948Z    | ^^^^
2026-02-09T09:19:42.6136046Z 21 |     # Test JSON report
2026-02-09T09:19:42.6136162Z 22 |     report_json = generator.generate_json()
2026-02-09T09:19:42.6136240Z    |
2026-02-09T09:19:42.6136348Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6136365Z 
2026-02-09T09:19:42.6136465Z W293 [*] Blank line contains whitespace
2026-02-09T09:19:42.6136565Z   --> tests/unit/test_report.py:26:1
2026-02-09T09:19:42.6136642Z    |
2026-02-09T09:19:42.6136775Z 24 |     assert report_json["summary"]["ec_score"] == 0.8
2026-02-09T09:19:42.6136877Z 25 |     assert "meta" in report_json
2026-02-09T09:19:42.6136958Z 26 |     
2026-02-09T09:19:42.6137047Z    | ^^^^
2026-02-09T09:19:42.6137143Z 27 |     # Test Markdown report
2026-02-09T09:19:42.6137266Z 28 |     report_md = generator.generate_markdown()
2026-02-09T09:19:42.6137344Z    |
2026-02-09T09:19:42.6137455Z help: Remove whitespace from blank line
2026-02-09T09:19:42.6137460Z 
2026-02-09T09:19:42.6137577Z I001 [*] Import block is un-sorted or un-formatted
2026-02-09T09:19:42.6137688Z  --> tests/unit/test_similarity.py:1:1
2026-02-09T09:19:42.6137777Z   |
2026-02-09T09:19:42.6137864Z 1 | / import pytest
2026-02-09T09:19:42.6138132Z 2 | | from trust_wedo.core.similarity_calculator import calculate_similarity, get_text_differences
2026-02-09T09:19:42.6138321Z   | |____________________________________________________________________________________________^
2026-02-09T09:19:42.6138400Z 3 |
2026-02-09T09:19:42.6138517Z 4 |   def test_calculate_similarity_identical():
2026-02-09T09:19:42.6138699Z   |
2026-02-09T09:19:42.6138803Z help: Organize imports
2026-02-09T09:19:42.6138809Z 
2026-02-09T09:19:42.6138908Z F401 [*] `pytest` imported but unused
2026-02-09T09:19:42.6139012Z  --> tests/unit/test_similarity.py:1:8
2026-02-09T09:19:42.6139102Z   |
2026-02-09T09:19:42.6139190Z 1 | import pytest
2026-02-09T09:19:42.6139273Z   |        ^^^^^^
2026-02-09T09:19:42.6139533Z 2 | from trust_wedo.core.similarity_calculator import calculate_similarity, get_text_differences
2026-02-09T09:19:42.6139622Z   |
2026-02-09T09:19:42.6139722Z help: Remove unused import: `pytest`
2026-02-09T09:19:42.6139728Z 
2026-02-09T09:19:42.6139814Z Found 234 errors.
2026-02-09T09:19:42.6140140Z [*] 192 fixable with the `--fix` option (11 hidden fixes can be enabled with the `--unsafe-fixes` option).
2026-02-09T09:19:42.6151266Z ##[error]Process completed with exit code 1.
